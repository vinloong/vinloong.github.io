"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[6370],{3905:(e,n,o)=>{o.d(n,{Zo:()=>d,kt:()=>g});var r=o(7294);function a(e,n,o){return n in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o,e}function t(e,n){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),o.push.apply(o,r)}return o}function s(e){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?t(Object(o),!0).forEach((function(n){a(e,n,o[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):t(Object(o)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(o,n))}))}return e}function i(e,n){if(null==e)return{};var o,r,a=function(e,n){if(null==e)return{};var o,r,a={},t=Object.keys(e);for(r=0;r<t.length;r++)o=t[r],n.indexOf(o)>=0||(a[o]=e[o]);return a}(e,n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);for(r=0;r<t.length;r++)o=t[r],n.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(a[o]=e[o])}return a}var c=r.createContext({}),l=function(e){var n=r.useContext(c),o=n;return e&&(o="function"==typeof e?e(n):s(s({},n),e)),o},d=function(e){var n=l(e.components);return r.createElement(c.Provider,{value:n},e.children)},u="mdxType",m={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},k=r.forwardRef((function(e,n){var o=e.components,a=e.mdxType,t=e.originalType,c=e.parentName,d=i(e,["components","mdxType","originalType","parentName"]),u=l(o),k=a,g=u["".concat(c,".").concat(k)]||u[k]||m[k]||t;return o?r.createElement(g,s(s({ref:n},d),{},{components:o})):r.createElement(g,s({ref:n},d))}));function g(e,n){var o=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var t=o.length,s=new Array(t);s[0]=k;var i={};for(var c in n)hasOwnProperty.call(n,c)&&(i[c]=n[c]);i.originalType=e,i[u]="string"==typeof e?e:a,s[1]=i;for(var l=2;l<t;l++)s[l]=o[l];return r.createElement.apply(null,s)}return r.createElement.apply(null,o)}k.displayName="MDXCreateElement"},3296:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>l,contentTitle:()=>i,default:()=>k,frontMatter:()=>s,metadata:()=>c,toc:()=>d});o(7294);var r=o(3905);function a(){return a=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var o=arguments[n];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},a.apply(this,arguments)}function t(e,n){if(null==e)return{};var o,r,a=function(e,n){if(null==e)return{};var o,r,a={},t=Object.keys(e);for(r=0;r<t.length;r++)o=t[r],n.indexOf(o)>=0||(a[o]=e[o]);return a}(e,n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);for(r=0;r<t.length;r++)o=t[r],n.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(a[o]=e[o])}return a}const s={title:"microk8s \u5165\u95e8",author:"Uncle Dragon",date:new Date("2021-07-02T00:00:00.000Z"),category:null,tag:["k8s"]},i="\u5b89\u88c5\uff1a",c={unversionedId:"kubernetes/microk8s",id:"kubernetes/microk8s",title:"microk8s \u5165\u95e8",description:"\u8bbe\u7f6e\u7528\u6237\u7ec4",source:"@site/docs/kubernetes/microk8s.md",sourceDirName:"kubernetes",slug:"/kubernetes/microk8s",permalink:"/docs/kubernetes/microk8s",draft:!1,tags:[],version:"current",lastUpdatedAt:1675912862,formattedLastUpdatedAt:"2023\u5e742\u67089\u65e5",frontMatter:{title:"microk8s \u5165\u95e8",author:"Uncle Dragon",date:"2021-07-02T00:00:00.000Z",category:null,tag:["k8s"]},sidebar:"kubernetes",previous:{title:"kubectl-conventions",permalink:"/docs/kubernetes/kubectl-conventions"},next:{title:"minikube",permalink:"/docs/kubernetes/minikube"}},l={},d=[{value:"\u8bbe\u7f6e\u7528\u6237\u7ec4",id:"\u8bbe\u7f6e\u7528\u6237\u7ec4",level:2},{value:"\u8bbe\u7f6e\u955c\u50cf\u52a0\u901f\uff1a",id:"\u8bbe\u7f6e\u955c\u50cf\u52a0\u901f",level:2},{value:"\u62c9\u53d6\u955c\u50cf\uff1a",id:"\u62c9\u53d6\u955c\u50cf",level:2},{value:"\u5b8c\u6210",id:"\u5b8c\u6210",level:2}],u={toc:d},m="wrapper";function k(e){var{components:n}=e,o=t(e,["components"]);return(0,r.kt)(m,a({},u,o,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("h1",a({},{id:"\u5b89\u88c5"}),"\u5b89\u88c5\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",a({parentName:"pre"},{className:"language-shell"}),"snap install microk8s --classic --channel=1.21\n")),(0,r.kt)("h1",a({},{id:"\u914d\u7f6e"}),"\u914d\u7f6e"),(0,r.kt)("h2",a({},{id:"\u8bbe\u7f6e\u7528\u6237\u7ec4"}),"\u8bbe\u7f6e\u7528\u6237\u7ec4"),(0,r.kt)("pre",null,(0,r.kt)("code",a({parentName:"pre"},{className:"language-shell"}),"sudo usermod -a -G microk8s $USER\nsudo chown -f -R $USER ~/.kube\n")),(0,r.kt)("h2",a({},{id:"\u8bbe\u7f6e\u955c\u50cf\u52a0\u901f"}),"\u8bbe\u7f6e\u955c\u50cf\u52a0\u901f\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",a({parentName:"pre"},{}),"vi /var/snap/microk8s/current/args/containerd-template.toml\n")),(0,r.kt)("pre",null,(0,r.kt)("code",a({parentName:"pre"},{}),'  sandbox_image = "registry.aliyuncs.com/google_containers/pause:3.1"\n...\n...\n\n      [plugins."io.containerd.grpc.v1.cri".registry.mirrors."docker.io"]\n        endpoint = [\n           "https://dr6tjot4.mirror.aliyuncs.com",\n           "https://registry-1.docker.io",\n        ]\n\n')),(0,r.kt)("h2",a({},{id:"\u62c9\u53d6\u955c\u50cf"}),"\u62c9\u53d6\u955c\u50cf\uff1a"),(0,r.kt)("p",null,"\u811a\u672c\uff1a\npull-images.sh"),(0,r.kt)("pre",null,(0,r.kt)("code",a({parentName:"pre"},{className:"language-bash"}),'#!/bin/bash\n  \nfolder=${1%.*}\n\nif [ x"${folder}" = x ]; then\n  echo -e "\\033[31m \u8bf7\u6307\u5b9a *-images.txt \u6587\u4ef6 \\033[0m"\n  exit\nfi\n\necho ""\necho ""\n\nwhile read line\ndo\n  let count++\n  line=$(echo $line)\n  if [ x${line} = x ]; then\n    echo -e "\\033[33m\u7b2c ${count} \u884c\u4e3a\u7a7a\\033[0m"\n    echo\n    continue\n  fi\n  echo ">>>>> \u4e0b\u8f7d\u7b2c ${count} \u4e2a\u955c\u50cf ${line} >>>>>"\n  microk8s.ctr --namespace k8s.io image pull $line\n  echo ">>>>> \u5b8c\u6210\u7b2c ${count} \u4e2a\u955c\u50cf ${line}\u7684\u4e0b\u8f7d >>>>>"\n  echo ""\ndone < ${1}\n\n')),(0,r.kt)("p",null,"\u955c\u50cf\uff1a\nimages.txt"),(0,r.kt)("pre",null,(0,r.kt)("code",a({parentName:"pre"},{className:"language-txt"}),"docker.io/nfvpe/multus:v3.4.2\ndocker.io/metallb/speaker:v0.9.3\ndocker.io/metallb/controller:v0.9.3\ndocker.io/kubernetesui/dashboard:v2.0.0\ndocker.io/kubernetesui/metrics-scraper:v1.0.4\ndocker.io/traefik:2.3\ndocker.io/alpine:3.6\ndocker.io/cdkbot/hostpath-provisioner-amd64:1.0.0\ndocker.io/cdkbot/registry-amd64:2.6\ndocker.io/coredns/coredns:1.8.0\ndocker.io/jaegertracing/jaeger-operator:1.21.3\ndocker.io/grafana/grafana:6.4.3\ndocker.io/nvidia/k8s-device-plugin:1.11\ndocker.io/busybox:1.28.4\ndocker.io/nginx:latest\ndocker.io/cdkbot/microbot-amd64\ndocker.io/buoyantio/emojivoto-emoji-svc:v8\ndocker.io/buoyantio/emojivoto-voting-svc:v8\ndocker.io/buoyantio/emojivoto-web:v8\ndocker.io/calico/cni:v3.13.2\ndocker.io/calico/pod2daemon-flexvol:v3.13.2\ndocker.io/calico/node:v3.13.2\ndocker.io/calico/kube-controllers:v3.13.2\ndocker.io/istio/examples-bookinfo-details-v1:1.8.0\ndocker.io/istio/examples-bookinfo-ratings-v1:1.8.0\ndocker.io/istio/examples-bookinfo-reviews-v1:1.8.0\ndocker.io/istio/examples-bookinfo-reviews-v2:1.8.0\ndocker.io/istio/examples-bookinfo-reviews-v3:1.8.0\ndocker.io/istio/examples-bookinfo-productpage-v1:1.8.0\ndocker.elastic.co/kibana/kibana-oss:7.4.2\nquay.io/coreos/prometheus-operator:v0.34.0\nquay.io/coreos/k8s-prometheus-adapter-amd64:v0.5.0\nquay.io/coreos/kube-rbac-proxy:v0.4.1\nquay.io/coreos/kube-state-metrics:v1.8.0\nquay.io/coreos/kube-rbac-proxy:v0.4.1\nquay.io/fluentd_elasticsearch/fluentd:v3.1.0\nquay.io/fluentd_elasticsearch/elasticsearch:v7.4.3\nquay.io/prometheus/alertmanager\nquay.io/prometheus/prometheus\nquay.io/prometheus/node-exporter:v0.18.1\nregistry.aliyuncs.com/google_containers/metrics-server-amd64:v0.3.6\nregistry.aliyuncs.com/google_containers/k8s-dns-kube-dns-amd64:1.14.7\nregistry.aliyuncs.com/google_containers/k8s-dns-dnsmasq-nanny-amd64:1.14.7\nregistry.aliyuncs.com/google_containers/k8s-dns-sidecar-amd64:1.14.7\nregistry.aliyuncs.com/google_containers/ingress-nginx/controller:v0.47.0\n")),(0,r.kt)("p",null,"\u6267\u884c\u811a\u672c\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",a({parentName:"pre"},{className:"language-shell"}),"./pull-images.sh images.txt\n")),(0,r.kt)("pre",null,(0,r.kt)("code",a({parentName:"pre"},{className:"language-shell"}),"microk8s.ctr --namespace k8s.io image tag registry.aliyuncs.com/google_containers/metrics-server-amd64:v0.3.6 k8s.gcr.io/metrics-server-amd64:v0.3.6\nmicrok8s.ctr --namespace k8s.io image tag registry.aliyuncs.com/google_containers/k8s-dns-kube-dns-amd64:1.14.7 gcr.io/google_containers/k8s-dns-kube-dns-amd64:1.14.7\nmicrok8s.ctr --namespace k8s.io image tag registry.aliyuncs.com/google_containers/k8s-dns-dnsmasq-nanny-amd64:1.14.7 gcr.io/google_containers/k8s-dns-dnsmasq-nanny-amd64:1.14.7\nmicrok8s.ctr --namespace k8s.io image tag registry.aliyuncs.com/google_containers/k8s-dns-sidecar-amd64:1.14.7 gcr.io/google_containers/k8s-dns-sidecar-amd64:1.14.7\nmicrok8s.ctr --namespace k8s.io image tag registry.aliyuncs.com/google_containers/ingress-nginx/controller:v0.47.0 k8s.gcr.io/ingress-nginx/controller:v0.47.0\n")),(0,r.kt)("h2",a({},{id:"\u5b8c\u6210"}),"\u5b8c\u6210"),(0,r.kt)("p",null,"\u7b49\u5f85k8s \u521d\u59cb\u5316\u5b8c\u6210"),(0,r.kt)("pre",null,(0,r.kt)("code",a({parentName:"pre"},{className:"language-shell"}),"$ microk8s status --wait-ready\nmicrok8s is running\nhigh-availability: no\n  datastore master nodes: 127.0.0.1:19001\n  datastore standby nodes: none\naddons:\n  enabled:\n    ha-cluster           # Configure high availability on the current node\n  disabled:\n    ambassador           # Ambassador API Gateway and Ingress\n    cilium               # SDN, fast with full network policy\n    dashboard            # The Kubernetes dashboard\n    dns                  # CoreDNS\n    fluentd              # Elasticsearch-Fluentd-Kibana logging and monitoring\n    gpu                  # Automatic enablement of Nvidia CUDA\n    helm                 # Helm 2 - the package manager for Kubernetes\n    helm3                # Helm 3 - Kubernetes package manager\n    host-access          # Allow Pods connecting to Host services smoothly\n    ingress              # Ingress controller for external access\n    istio                # Core Istio service mesh services\n    jaeger               # Kubernetes Jaeger operator with its simple config\n    keda                 # Kubernetes-based Event Driven Autoscaling\n    knative              # The Knative framework on Kubernetes.\n    kubeflow             # Kubeflow for easy ML deployments\n    linkerd              # Linkerd is a service mesh for Kubernetes and other frameworks\n    metallb              # Loadbalancer for your Kubernetes cluster\n    metrics-server       # K8s Metrics Server for API access to service metrics\n    multus               # Multus CNI enables attaching multiple network interfaces to pods\n    openebs              # OpenEBS is the open-source storage solution for Kubernetes\n    openfaas             # openfaas serverless framework\n    portainer            # Portainer UI for your Kubernetes cluster\n    prometheus           # Prometheus operator for monitoring and logging\n    rbac                 # Role-Based Access Control for authorisation\n    registry             # Private image registry exposed on localhost:32000\n    storage              # Storage class; allocates storage from host directory\n    traefik              # traefik Ingress controller for external access\n\n")),(0,r.kt)("p",null,"\u8bbf\u95ee k8s"),(0,r.kt)("pre",null,(0,r.kt)("code",a({parentName:"pre"},{className:"language-shell"}),"$ microk8s kubectl get nodes\nNAME       STATUS   ROLES    AGE   VERSION\ncloud-n1   Ready    <none>   21h   v1.21.1-3+ba118484dd39df\n")),(0,r.kt)("pre",null,(0,r.kt)("code",a({parentName:"pre"},{}),"alias kubectl='microk8s kubectl'\n")),(0,r.kt)("hr",null),(0,r.kt)("p",null,"\u6211\u628a\u955c\u50cf\u5168\u90e8\u5bfc\u51fa\u6765\u4e86\uff0c\u5927\u5bb6\u628a\u955c\u50cf\u538b\u7f29\u6587\u4ef6\u62f7\u8d1d\u5230\u81ea\u5df1\u672c\u5730\uff0c\u6267\u884c\u4e0b\u9762\u811a\u672c\u5c31\u53ef\u4ee5\u4e86"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"import.sh")),(0,r.kt)("pre",null,(0,r.kt)("code",a({parentName:"pre"},{className:"language-bash"}),'#!/bin/bash\n\ndir=microk8s-images\n\ntar zxvf ${dir}.tar.gz\n\ncd ${dir}\n\nimages=$(ls ./*.tar )\n\nfor image in ${images}\ndo\n    echo "\u52a0\u8f7d\u955c\u50cf\uff1a ${image}"\n    microk8s.ctr --namespace k8s.io image import ${image}\n    echo "\u52a0\u8f7d\u5b8c\u6210"\ndone\n\n')),(0,r.kt)("pre",null,(0,r.kt)("code",a({parentName:"pre"},{className:"language-shell"}),"./import.sh\n")),(0,r.kt)("h1",a({},{id:"\u83b7\u5f97k8s-\u4f9d\u8d56\u955c\u50cf"}),"\u83b7\u5f97k8s \u4f9d\u8d56\u955c\u50cf"),(0,r.kt)("pre",null,(0,r.kt)("code",a({parentName:"pre"},{className:"language-shell"}),"$ git clone https://github.com/ubuntu/microk8s.git\nCloning into 'microk8s'...\nremote: Enumerating objects: 8514, done.\nremote: Counting objects: 100% (847/847), done.\nremote: Compressing objects: 100% (473/473), done.\nremote: Total 8514 (delta 502), reused 662 (delta 364), pack-reused 7667\nReceiving objects: 100% (8514/8514), 12.02 MiB | 7.93 MiB/s, done.\nResolving deltas: 100% (5628/5628), done.\n\n$ grep -ir 'image: ' * | awk '{print $3 $4}' | uniq\nnvidia/k8s-device-plugin:1.11\nmetallb/speaker:v0.9.3\nmetallb/controller:v0.9.3\ncdkbot/hostpath-provisioner-$ARCH:1.0.0\ncoredns/coredns:1.8.0\nimage:k8s.gcr.io/ingress-nginx/controller:$TAG\nimage:traefik:2.3\ncdkbot/registry-$ARCH:2.6\nquay.io/prometheus/alertmanager\nquay.io/coreos/prometheus-operator:v0.34.0\n\nimage:grafana/grafana:6.4.3\nquay.io/coreos/kube-rbac-proxy:v0.4.1\nquay.io/coreos/kube-state-metrics:v1.8.0\nquay.io/prometheus/node-exporter:v0.18.1\nquay.io/coreos/kube-rbac-proxy:v0.4.1\nquay.io/coreos/k8s-prometheus-adapter-amd64:v0.5.0\nquay.io/prometheus/prometheus\nimage:nginx\nnfvpe/multus:v3.4.2\nkubernetesui/dashboard:v2.2.0\nkubernetesui/metrics-scraper:v1.0.6\ndocker.elastic.co/kibana/kibana-oss:7.10.2\nimage:quay.io/fluentd_elasticsearch/elasticsearch:v7.10.2\nimage:alpine:3.6\nquay.io/fluentd_elasticsearch/fluentd:v3.1.0\n\njaegertracing/jaeger-operator:1.24.0\nk8s.gcr.io/metrics-server/metrics-server:v0.5.0\ngcr.io/google_containers/k8s-dns-kube-dns-$ARCH:1.14.7\ngcr.io/google_containers/k8s-dns-dnsmasq-nanny-$ARCH:1.14.7\ngcr.io/google_containers/k8s-dns-sidecar-$ARCH:1.14.7\nbuoyantio/emojivoto-emoji-svc:v8\nbuoyantio/emojivoto-voting-svc:v8\nbuoyantio/emojivoto-web:v8\nk8s.gcr.io/cuda-vector-add:v0.1\nimage:cdkbot/microbot-$ARCH\nbusybox\nnginx\nlocalhost:32000/my-busybox\nbusybox\nbusybox:1.28.4\nimage:gcr.io/knative-samples/helloworld-go\nnginx:latest\nk8s.gcr.io/cuda-vector-add:v0.1\nimage:cdkbot/microbot-{{\ndocker.io/calico/cni:v3.19.1\ndocker.io/calico/pod2daemon-flexvol:v3.19.1\ndocker.io/calico/node:v3.19.1\ndocker.io/calico/kube-controllers:v3.17.3\ncdkbot/calico-cni-s390x:v3.15.1\ncdkbot/calico-pod2daemon-flexvol-s390x:v3.15.1\ncdkbot/calico-node-s390x:v3.15.1\ncdkbot/calico-kube-controllers-s390x:v3.15.1\n")),(0,r.kt)("p",null,"\u5206\u6790\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",a({parentName:"pre"},{}),"# \u4e0b\u9762\u51e0\u4e2a\u955c\u50cf\u662f\u65e0\u6cd5\u76f4\u63a5 pull \u7684\ngcr.io/google_containers/k8s-dns-kube-dns-amd64:1.14.7\ngcr.io/google_containers/k8s-dns-dnsmasq-nanny-amd64:1.14.7\ngcr.io/google_containers/k8s-dns-sidecar-amd64:1.14.7\nk8s.gcr.io/metrics-server/metrics-server:v0.5.0\nk8s.gcr.io/ingress-nginx/controller:v1.0.4\nk8s.gcr.io/pause:3.1\n\n# \u4e0b\u9762\u662f\u53ef\u4ee5\u76f4\u63a5 pull \u7684\ndocker.io/kubernetesui/dashboard:v2.2.0\ndocker.io/kubernetesui/metrics-scraper:v1.0.6\ndocker.io/cdkbot/calico-cni-s390x:v3.15.1\ndocker.io/cdkbot/calico-pod2daemon-flexvol-s390x:v3.15.1\ndocker.io/cdkbot/calico-node-s390x:v3.15.1\ndocker.io/cdkbot/calico-kube-controllers-s390x:v3.15.1\ndocker.io/cdkbot/hostpath-provisioner-amd64:1.0.0\ndocker.io/cdkbot/registry-amd64:2.6\ndocker.io/coredns/coredns:1.8.0\ndocker.io/calico/cni:v3.19.1\ndocker.io/calico/pod2daemon-flexvol:v3.19.1\ndocker.io/calico/node:v3.19.1\ndocker.io/calico/kube-controllers:v3.17.3\ndocker.io/grafana/grafana:6.4.3\ndocker.elastic.co/kibana/kibana-oss:7.10.2\nquay.io/fluentd_elasticsearch/elasticsearch:v7.10.2\nquay.io/fluentd_elasticsearch/fluentd:v3.1.0\nquay.io/prometheus/alertmanager:latest\nquay.io/prometheus/prometheus:latest\nquay.io/prometheus/node-exporter:v0.18.1\nquay.io/coreos/kube-rbac-proxy:v0.4.1\nquay.io/coreos/prometheus-operator:v0.34.0\nquay.io/coreos/kube-rbac-proxy:v0.4.1\nquay.io/coreos/kube-state-metrics:v1.8.0\nquay.io/coreos/k8s-prometheus-adapter-amd64:v0.5.0\n\n#\n# \u4e0b\u9762\u955c\u50cf\u4e0d\u662f\u5fc5\u987b\u7684\n#\n\n# \u4e00\u4e2a\u5fae\u670d\u52a1\u6846\u67b6 example\nbuoyantio/emojivoto-emoji-svc:v8\nbuoyantio/emojivoto-voting-svc:v8\nbuoyantio/emojivoto-web:v8\n\n# \u5fae\u670d\u52a1\u6cbb\u7406\njaegertracing/jaeger-operator:1.24.0\ntraefik:2.3\n\n# AI \u667a\u80fd\u5c0f\u8f66\ncdkbot/microbot-amd64\n\n# CPU\u4e0eGPU\u5e76\u7528\u7684\u201c\u534f\u540c\u5904\u7406\u201d\nk8s.gcr.io/cuda-vector-add:v0.1\n\n# \u673a\u5668\u5b66\u4e60\nnvidia/k8s-device-plugin:1.11\nmetallb/speaker:v0.9.3\nmetallb/controller:v0.9.3\n")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"pull-gcr.sh")),(0,r.kt)("p",null,"pull  \u8c37\u6b4c\u955c\u50cf"),(0,r.kt)("pre",null,(0,r.kt)("code",a({parentName:"pre"},{className:"language-shell"}),'#!/bin/bash\nimages=(\nk8s.gcr.io/metrics-server/metrics-server:v0.5.0=registry.cn-hangzhou.aliyuncs.com/gcr_k8s_containers/microk8s_metrics-server:v0.5.0\ngcr.io/google_containers/k8s-dns-sidecar-amd64:1.14.7=registry.cn-hangzhou.aliyuncs.com/gcr_k8s_containers/microk8s_dns-sidecar:1.14.7\ngcr.io/google_containers/k8s-dns-kube-dns-amd64:1.14.7=registry.cn-hangzhou.aliyuncs.com/gcr_k8s_containers/microk8s_kube-dns:1.14.7\ngcr.io/google_containers/k8s-dns-dnsmasq-nanny-amd64:1.14.7=registry.cn-hangzhou.aliyuncs.com/gcr_k8s_containers/microk8s_dnsmasq-nanny:1.14.7\nk8s.gcr.io/ingress-nginx/controller:v1.0.4=registry.cn-hangzhou.aliyuncs.com/gcr_k8s_containers/ingress-nginx-controller:v1.0.4\nk8s.gcr.io/pause:3.1=registry.cn-hangzhou.aliyuncs.com/gcr_k8s_containers/pause:3.1\n)\n\nOIFS=$IFS\n\nfor image in ${images[@]};do\n    IFS=\'=\'\n    set $image\n    echo -e "\\033[32m >>>>>>>> pull $1 ... >>>>>>>> \\033[0m"\n    microk8s.ctr --namespace k8s.io image pull $2\n    microk8s.ctr --namespace k8s.io image tag $2 $1\n    IFS=$OIFS\n    echo -e "\\033[32m ========= pull $1 done. ======== \\033[0m"\ndone\n')),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"pull.sh")),(0,r.kt)("pre",null,(0,r.kt)("code",a({parentName:"pre"},{className:"language-shell"}),'#!/bin/bash\n\nimages=(\ndocker.io/kubernetesui/dashboard:v2.2.0\ndocker.io/kubernetesui/metrics-scraper:v1.0.6\ndocker.io/cdkbot/calico-cni-s390x:v3.15.1\ndocker.io/cdkbot/calico-pod2daemon-flexvol-s390x:v3.15.1\ndocker.io/cdkbot/calico-node-s390x:v3.15.1\ndocker.io/cdkbot/calico-kube-controllers-s390x:v3.15.1\ndocker.io/cdkbot/hostpath-provisioner-amd64:1.0.0\ndocker.io/cdkbot/registry-amd64:2.6\ndocker.io/coredns/coredns:1.8.0\ndocker.io/grafana/grafana:6.4.3\ndocker.io/calico/cni:v3.19.1\ndocker.io/calico/pod2daemon-flexvol:v3.19.1\ndocker.io/calico/node:v3.19.1\ndocker.io/calico/kube-controllers:v3.17.3\ndocker.elastic.co/kibana/kibana-oss:7.10.2\nquay.io/fluentd_elasticsearch/elasticsearch:v7.10.2\nquay.io/fluentd_elasticsearch/fluentd:v3.1.0\nquay.io/prometheus/alertmanager:latest\nquay.io/prometheus/prometheus:latest\nquay.io/prometheus/node-exporter:v0.18.1\nquay.io/coreos/kube-rbac-proxy:v0.4.1\nquay.io/coreos/prometheus-operator:v0.34.0\nquay.io/coreos/kube-rbac-proxy:v0.4.1\nquay.io/coreos/kube-state-metrics:v1.8.0\nquay.io/coreos/k8s-prometheus-adapter-amd64:v0.5.0\n)\n\nOIFS=$IFS\n\nfor image in ${images[@]};do\n    echo -e "\\033[32m >>>>>>>>>>>>>> pull ${image} >>>>>>>>>>>>>>> \\033[0m"\n    microk8s.ctr --namespace k8s.io image pull $image\n    echo -e "\\033[32m ============== pull ${image} done. ============== \\033[0m"\ndone\n\n')),(0,r.kt)("h1",a({},{id:"\u914d\u7f6e-1"}),"\u914d\u7f6e"),(0,r.kt)("p",null,"microk8s containerd \u7684\u914d\u7f6e\u5728 ",(0,r.kt)("inlineCode",{parentName:"p"},"/var/snap/microk8s/current/args/")))}k.isMDXComponent=!0}}]);