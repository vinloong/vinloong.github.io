"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[6696],{3905:(e,n,t)=>{t.d(n,{Zo:()=>p,kt:()=>m});var r=t(7294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function s(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var c=r.createContext({}),i=function(e){var n=r.useContext(c),t=n;return e&&(t="function"==typeof e?e(n):s(s({},n),e)),t},p=function(e){var n=i(e.components);return r.createElement(c.Provider,{value:n},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},g=r.forwardRef((function(e,n){var t=e.components,a=e.mdxType,o=e.originalType,c=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),u=i(t),g=a,m=u["".concat(c,".").concat(g)]||u[g]||d[g]||o;return t?r.createElement(m,s(s({ref:n},p),{},{components:t})):r.createElement(m,s({ref:n},p))}));function m(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var o=t.length,s=new Array(o);s[0]=g;var l={};for(var c in n)hasOwnProperty.call(n,c)&&(l[c]=n[c]);l.originalType=e,l[u]="string"==typeof e?e:a,s[1]=l;for(var i=2;i<o;i++)s[i]=t[i];return r.createElement.apply(null,s)}return r.createElement.apply(null,t)}g.displayName="MDXCreateElement"},3091:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>i,contentTitle:()=>l,default:()=>g,frontMatter:()=>s,metadata:()=>c,toc:()=>p});t(7294);var r=t(3905);function a(){return a=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},a.apply(this,arguments)}function o(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}const s={slug:"sealos ceph",title:"sealos start && ceph clean",authors:"loong",tags:["sealos","k8s","ceph"]},l=void 0,c={permalink:"/blog/sealos ceph",source:"@site/blog/2022-12-27-sealos-ceph.md",title:"sealos start && ceph clean",description:"",date:"2022-12-27T00:00:00.000Z",formattedDate:"2022\u5e7412\u670827\u65e5",tags:[{label:"sealos",permalink:"/blog/tags/sealos"},{label:"k8s",permalink:"/blog/tags/k-8-s"},{label:"ceph",permalink:"/blog/tags/ceph"}],readingTime:1.455,hasTruncateMarker:!1,authors:[{name:"Vinloong",title:"one dev",url:"https://lingwenlong.com",imageURL:"https://raw.githubusercontent.com/vinloong/imgchr/main/notes/2022/12/30/10-02-00-ae0172.png",key:"loong"}],frontMatter:{slug:"sealos ceph",title:"sealos start && ceph clean",authors:"loong",tags:["sealos","k8s","ceph"]},prevItem:{title:"redia-ha",permalink:"/blog/2023/01/12/redia-ha"}},i={authorsImageUrls:[void 0]},p=[],u={toc:p},d="wrapper";function g(e){var{components:n}=e,t=o(e,["components"]);return(0,r.kt)(d,a({},u,t,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("pre",null,(0,r.kt)("code",a({parentName:"pre"},{className:"language-bash"}),"wget https://github.91chi.fun/https://github.com/labring/sealos/releases/download/v4.1.3/sealos_4.1.3_linux_amd64.tar.gz\ntar -zxvf sealos_4.1.3_linux_amd64.tar.gz sealos\nchmod +x sealos\nmv sealos /usr/bin\nsealos version\nsealos apply -f Clusterfile\n\nsealos reset --cluster fs-cloud  --masters 10.8.40.125,10.8.40.126,10.8.40.129 --nodes 10.8.40.134,10.8.40.133,10.8.40.128,10.8.40.124 -p Freesun_123\n\nsealos --cluster fs-cloud add --nodes 10.8.40.124\n\n\n")),(0,r.kt)("pre",null,(0,r.kt)("code",a({parentName:"pre"},{className:"language-bash"}),"mkdir -p $HOME/.kube\nsudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config\nsudo chown $(id -u):$(id -g) $HOME/.kube/config\n")),(0,r.kt)("pre",null,(0,r.kt)("code",a({parentName:"pre"},{className:"language-bash"}),'kubectl exec -it -n rook-ceph rook-ceph-tools-5679b7d8f-8fpqj -- bash\n$ ceph status\n  cluster:\n    id:     b3282dee-82f6-4e2f-b89e-48c01077662b\n    health: HEALTH_OK\n \n  services:\n    mon: 3 daemons, quorum a,b,d (age 31s)\n    mgr: b(active, since 76s), standbys: a\n    osd: 3 osds: 3 up (since 76s), 3 in (since 103s)\n \n  data:\n    pools:   1 pools, 1 pgs\n    objects: 2 objects, 577 KiB\n    usage:   67 MiB used, 3.3 TiB / 3.3 TiB avail\n    pgs:     1 active+clean\n\n\n$ ceph osd status\nID  HOST      USED  AVAIL  WR OPS  WR DATA  RD OPS  RD DATA  STATE      \n 0  node-01  22.1M  1117G      0        0       0        0   exists,up  \n 1  node-03  22.2M  1117G      0        0       0        0   exists,up  \n 2  node-02  22.1M  1117G      0        0       0        0   exists,up\n\n\n$ ceph osd pool ls detail\npool 1 \'.mgr\' replicated size 3 min_size 2 crush_rule 0 object_hash rjenkins pg_num 1 pgp_num 1 autoscale_mode on last_change 18 flags hashpspool stripe_width 0 pg_num_max 32 pg_num_min 1 application mgr\n\n\n$ rados df\nPOOL_NAME     USED  OBJECTS  CLONES  COPIES  MISSING_ON_PRIMARY  UNFOUND  DEGRADED  RD_OPS       RD  WR_OPS       WR  USED COMPR  UNDER COMPR\n.mgr       1.7 MiB        2       0       6                   0        0         0     126  109 KiB     181  2.9 MiB         0 B          0 B\n\ntotal_objects    2\ntotal_used       67 MiB\ntotal_avail      3.3 TiB\ntotal_space      3.3 TiB\n\n\n\n\n\u91cd\u65b0\u5b89\u88c5 rook-ceph \u91cd\u7f6e\u78c1\u76d8\u72b6\u6001\n\nDISK="/dev/sdX"\n\nsgdisk --zap-all $DISK\n\ndd if=/dev/zero of="$DISK" bs=1M count=100 oflag=direct,dsync\n\n# \u5982\u679c\u662f\u56fa\u6001\u76d8\u4f7f\u7528\u4e0b\u9762\u547d\u4ee4 \u66ff\u6362\u4e0a\u9762 `dd` \u547d\u4ee4\nblkdiscard $DISK\n\n')))}g.isMDXComponent=!0}}]);