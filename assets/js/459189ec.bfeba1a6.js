"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[9955],{3905:(e,n,t)=>{t.d(n,{Zo:()=>u,kt:()=>f});var a=t(7294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function d(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function c(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?d(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):d(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function o(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},d=Object.keys(e);for(a=0;a<d.length;a++)t=d[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);for(a=0;a<d.length;a++)t=d[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var i=a.createContext({}),l=function(e){var n=a.useContext(i),t=n;return e&&(t="function"==typeof e?e(n):c(c({},n),e)),t},u=function(e){var n=l(e.components);return a.createElement(i.Provider,{value:n},e.children)},s="mdxType",b={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},p=a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,d=e.originalType,i=e.parentName,u=o(e,["components","mdxType","originalType","parentName"]),s=l(t),p=r,f=s["".concat(i,".").concat(p)]||s[p]||b[p]||d;return t?a.createElement(f,c(c({ref:n},u),{},{components:t})):a.createElement(f,c({ref:n},u))}));function f(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var d=t.length,c=new Array(d);c[0]=p;var o={};for(var i in n)hasOwnProperty.call(n,i)&&(o[i]=n[i]);o.originalType=e,o[s]="string"==typeof e?e:r,c[1]=o;for(var l=2;l<d;l++)c[l]=t[l];return a.createElement.apply(null,c)}return a.createElement.apply(null,t)}p.displayName="MDXCreateElement"},1718:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>p,frontMatter:()=>c,metadata:()=>i,toc:()=>u});t(7294);var a=t(3905);function r(){return r=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},r.apply(this,arguments)}function d(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},d=Object.keys(e);for(a=0;a<d.length;a++)t=d[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);for(a=0;a<d.length;a++)t=d[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}const c={title:"\u5207\u6362k8s\u5bb9\u5668\u8fd0\u884c\u65f6\uff1a\u4ecedocker\u5230containerd",date:new Date("2021-06-21T00:00:00.000Z"),category:["kubernetes"],tag:["runtime"]},o="\u5982\u4f55\u8fc1\u79fb",i={unversionedId:"kubernetes/k8s-docker-2-containerd",id:"kubernetes/k8s-docker-2-containerd",title:"\u5207\u6362k8s\u5bb9\u5668\u8fd0\u884c\u65f6\uff1a\u4ecedocker\u5230containerd",description:"1. \u6211\u4eec\u8981\u68c0\u67e5\u5f53\u524d\u7684\u8fd0\u884c\u7684\u5bb9\u5668\u65f6\u4ec0\u4e48",source:"@site/docs/kubernetes/k8s-docker-2-containerd.md",sourceDirName:"kubernetes",slug:"/kubernetes/k8s-docker-2-containerd",permalink:"/docs/kubernetes/k8s-docker-2-containerd",draft:!1,tags:[],version:"current",lastUpdatedAt:1675912862,formattedLastUpdatedAt:"2023\u5e742\u67089\u65e5",frontMatter:{title:"\u5207\u6362k8s\u5bb9\u5668\u8fd0\u884c\u65f6\uff1a\u4ecedocker\u5230containerd",date:"2021-06-21T00:00:00.000Z",category:["kubernetes"],tag:["runtime"]},sidebar:"kubernetes",previous:{title:"k8s \u79fb\u9664\u8282\u70b9",permalink:"/docs/kubernetes/k8s-del-or-add-node"},next:{title:"\u5355\u673a\u73af\u5883\u5b89\u88c5 k8s (\u57fa\u4e8e cri-o)",permalink:"/docs/kubernetes/k8s-install"}},l={},u=[{value:"\u9a71\u9010\u8282\u70b9",id:"\u9a71\u9010\u8282\u70b9",level:2},{value:"\u505c\u6b62 <code>kubelet</code> \u548c <code>docker</code> \u670d\u52a1",id:"\u505c\u6b62-kubelet-\u548c-docker-\u670d\u52a1",level:2},{value:"\u914d\u7f6e <code>containerd</code>",id:"\u914d\u7f6e-containerd",level:2},{value:"\u91cd\u542f <code>containerd</code>",id:"\u91cd\u542f-containerd",level:2},{value:"\u4fee\u6539 <code>runtime</code>",id:"\u4fee\u6539-runtime",level:2},{value:"\u542f\u52a8 <code>kubelet</code>",id:"\u542f\u52a8-kubelet",level:2},{value:"\u68c0\u67e5",id:"\u68c0\u67e5",level:2},{value:"\u6062\u590d\u8282\u70b9",id:"\u6062\u590d\u8282\u70b9",level:2},{value:"\u5220\u9664 <code>docker</code>  (\u975e\u5fc5\u9700)",id:"\u5220\u9664-docker--\u975e\u5fc5\u9700",level:2}],s={toc:u},b="wrapper";function p(e){var{components:n}=e,t=d(e,["components"]);return(0,a.kt)(b,r({},s,t,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("h1",r({},{id:"\u5982\u4f55\u8fc1\u79fb"}),"\u5982\u4f55\u8fc1\u79fb"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"\u6211\u4eec\u8981\u68c0\u67e5\u5f53\u524d\u7684\u8fd0\u884c\u7684\u5bb9\u5668\u65f6\u4ec0\u4e48"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",r({parentName:"pre"},{className:"language-shell"}),"$ kubectl get nodes -o wide\nNAME          STATUS   ROLES    AGE    VERSION   INTERNAL-IP   EXTERNAL-IP   OS-IMAGE             KERNEL-VERSION       CONTAINER-RUNTIME\ntest-master   Ready    master   307d   v1.18.8   10.8.30.157   <none>        Ubuntu 18.04.5 LTS   4.15.0-122-generic   docker://19.3.12\ntest-n1       Ready    <none>   277d   v1.18.8   10.8.30.152   <none>        Ubuntu 18.04.4 LTS   4.15.0-128-generic   docker://19.3.12\ntest-n2       Ready    <none>   307d   v1.18.8   10.8.30.156   <none>        Ubuntu 18.04.4 LTS   4.15.0-128-generic   docker://19.3.12\ntest-n3       Ready    <none>   307d   v1.18.8   10.8.30.155   <none>        Ubuntu 18.04.5 LTS   4.15.0-142-generic   docker://19.3.12\ntest-n4       Ready    <none>   307d   v1.18.8   10.8.30.161   <none>        Ubuntu 16.04.6 LTS   4.15.0-122-generic   docker://19.3.12\ntest-n5       Ready    <none>   307d   v1.18.8   10.8.30.158   <none>        Ubuntu 20.04.2 LTS   5.4.0-73-generic     docker://20.10.6\n")))),(0,a.kt)("ol",r({},{start:2}),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"\u68c0\u67e5 containerd cli ctr \u662f\u5426\u5b58\u5728"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",r({parentName:"pre"},{className:"language-bash"}),"ctr version\nClient:\n  Version:  1.4.6\n  Revision: d71fcd7d8303cbf684402823e425e9dd2e99285d\n  Go version: go1.13.15\n\nServer:\n  Version:  1.4.6\n  Revision: d71fcd7d8303cbf684402823e425e9dd2e99285d\n  UUID: 9ee94062-6162-4044-aba7-8b2dc2431cd9\n")))),(0,a.kt)("ol",r({},{start:3}),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"\u68c0\u67e5 moby \u547d\u540d\u7a7a\u95f4"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",r({parentName:"pre"},{className:"language-shell"}),"# ctr namespace list\nNAME LABELS \nmoby        \n\n\n# ctr -n moby c ls\nCONTAINER                                                           IMAGE    RUNTIME                           \n02260fbe3748f4043d39a47105aca8a3aa6bef5b5dc35c2e01e5a95d2df6bf44    -        io.containerd.runtime.v1.linux    \n0827c2390d3f824d189662f3f30199c6d712b46f32cde3718457bd8d0fee473d    -        io.containerd.runtime.v1.linux    \n097c3b72a7d74a4484097487dfe92ca8136202bf581d7087b8aca234d3095ec3    -        io.containerd.runtime.v1.linux    \n20d90cd5d2cbba75c110f3071498ccfb2546d4e2a26485ace7123a3801150624    -        io.containerd.runtime.v1.linux    \n34360aa18c08dd552b65e21a32c7189c85ceed8d95a8ab19dad26aa4e25ebf8b    -        io.containerd.runtime.v1.linux    \n37413d2581f895f99f7acc14e5e5a9b87dfb804f9176726f6639b2a43abdf72c    -        io.containerd.runtime.v1.linux    \n396b1877e2d291e845d036a0a8d5a0a72995c716e72dd0766f742f523d4decfe    -        io.containerd.runtime.v1.linux    \n3ddb8a34a401acceef83a3749963d6c43508e1b2be33e056efe2f4242d8a47a5    -        io.containerd.runtime.v1.linux    \n3ea03d2796b62e3286b9cf2b30f0902ec35df89af0884a8e0670b22f727fc96b    -        io.containerd.runtime.v1.linux    \n409e8c0b76bb0a51600c6081ee7d4d1502af5f6a38f60dc077eb7ce384d4ba49    -        io.containerd.runtime.v1.linux    \n5cee70ca1ad365d3dc326c97e3b53b87353ee3835af98244aea0f72e1a10a0e0    -        io.containerd.runtime.v1.linux    \n66c1371599b4b2cd4fb6ce27147bbab4348054745121c4fe9a64bdffa5a3e57b    -        io.containerd.runtime.v1.linux    \n79d87cf7e89d8029f85a0ee207837bd102c65a6c4dca840b81ac895dff97d4ed    -        io.containerd.runtime.v1.linux    \n8599a6c45eb7d66c0d74d69000c721f33d95a2c1b2e6e813d8ef1dcd1ca4e1c7    -        io.containerd.runtime.v1.linux    \n89e947b1f203c2d55894a33c3c01f0b734b08a714cc2446e45c7df12bcdcc227    -        io.containerd.runtime.v1.linux    \n902112cfb762b60d353b9ab6e104bcb4ef6f626db10b56d83474500441834607    -        io.containerd.runtime.v1.linux    \n9c30b5e7d0f75a341194f612380e3e2352b6ad6ee63623aafc3d19e3f2bb1a59    -        io.containerd.runtime.v1.linux    \n9f76f8664b25a545253aad1a6b11731dc5569215dbf8b0a614d91bd1f181d552    -        io.containerd.runtime.v1.linux    \na2e5cdfc95a34bd1db0049476282baefa955c58600b2bc323ff7b1d4bc060be7    -        io.containerd.runtime.v1.linux    \na39582855bcc4fd04523ce03de5e7bd7202f0c2b66534606bc0c0419cf661483    -        io.containerd.runtime.v1.linux    \na7c1dfea50841b3a8f6644f5c5902f61db71f80ec2c80ac64720b5a757cdc8b5    -        io.containerd.runtime.v1.linux    \nbde73ac0cc419904a8022bae23db0376e0521ba4888fd384bd3b063f88941482    -        io.containerd.runtime.v1.linux    \nd1a86b65635357a3e3346d54df85c7c9c040105af97b97176ca4b8d0400498cf    -        io.containerd.runtime.v1.linux    \nd239c43b914e7c464bf55c25cbc2e55596d35c89ecf70ac60a344c57b151d081    -        io.containerd.runtime.v1.linux    \nd46bd5ce29c5d4b1137d1840e7a8412e6ed7d058a421a4c8df9ebfd5eb707ad5    -        io.containerd.runtime.v1.linux    \nd4e8bef66fe4be1483fd32bf7bdce93166c69d21f430d3a746d3766410f93b48    -        io.containerd.runtime.v1.linux    \nd5c9fb0a307ef49e90a680cf6b3865cf2323960f02b5d42a6e6f54964c3ab830    -        io.containerd.runtime.v1.linux    \ndb8efd6e685d095a2578b9399e3495d08f7a47750b406113439f3175fb3bc0a5    -        io.containerd.runtime.v1.linux    \ne5db513a09db4fe1d82f9b00564e79450b898254a846782406d68736e7b84897    -        io.containerd.runtime.v1.linux    \ne671b2d14830d9d6a64df18599929ba4e3926f394148929389f7c482cfea45db    -        io.containerd.runtime.v1.linux    \nf0fbb7a25a040c309eb4bfcd08e08e5265349537d3a47387f02f5f051a3d3d0f    -        io.containerd.runtime.v1.linux    \nf86c123dec237cf02706aaf8cad0b7753fa2323f7588aacf2aa64037363c60ee    -        io.containerd.runtime.v1.linux    \n\n")),(0,a.kt)("p",{parentName:"li"},"\u4e00\u5207\u6b63\u5e38\uff0c\u90a3\u4e48\u6211\u4eec\u53ef\u4ee5\u66f4\u6362cri \u4e86, \u6bcf\u6b21\u4e00\u4e2a\u8282\u70b9\uff0c\u9996\u5148\u662f\u5de5\u4f5c\u8282\u70b9\uff0c\u7136\u540e\u662f\u63a7\u5236\u8282\u70b9\uff0c\u5982\u679c\u53ea\u6709\u4e00\u4e2a\u63a7\u5236\u8282\u70b9\uff0c\u90a3\u4e48\u4f60\u5c06\u6682\u65f6\u4f1a\u5931\u53bb\u5bf9\u96c6\u7fa4\u7684\u8bbf\u95ee\uff0c\u6b63\u5e38\u60c5\u51b5\u4e0b\u4f1a\u81ea\u52a8\u6062\u590d\u7684\u3002\n\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5207\u6362\u540e\u6240\u6709\u7684\u955c\u50cf\u90fd\u8981\u91cd\u65b0\u62c9\u53d6\u3002"))),(0,a.kt)("h1",r({},{id:"\u8fc1\u79fb"}),"\u8fc1\u79fb"),(0,a.kt)("p",null,"\u6211\u4eec \u4ece ",(0,a.kt)("inlineCode",{parentName:"p"},"test-n4")," \u5f00\u59cb\uff1a"),(0,a.kt)("h2",r({},{id:"\u9a71\u9010\u8282\u70b9"}),"\u9a71\u9010\u8282\u70b9"),(0,a.kt)("pre",null,(0,a.kt)("code",r({parentName:"pre"},{className:"language-shell"}),"# \u8bbe\u7f6e\u8282\u70b9\u4e0d\u53ef\u8c03\u5ea6\n$ kubectl cordon test-n4\nnode/test-n4 cordoned\n\n# \u5c06\u8282\u70b9\u4e0a\u8d44\u6e90\u8c03\u5ea6\u5230\u5176\u4ed6\u8282\u70b9\n$ kubectl drain test-n4 --delete-local-data --force --ignore-daemonsets\nnode/test-n4 already cordoned\nWARNING: ignoring DaemonSet-managed Pods: kube-eye/fluentd-es-v3.1.0-4j5mr, kube-eye/kube-eye-worker-q76xt, kube-system/kube-flannel-ds-amd64-xflkq, kube-system/kube-proxy-dpwl4, kubeedge/iptables-zgldl, kubesphere-logging-system/fluent-bit-lgc5v, kubesphere-monitoring-system/node-exporter-7xd84, weave/weave-scope-agent-hr4zx\nevicting pod anxinyun/anxinyun-config-center-65b7f88d5c-62zbk\nevicting pod anxinyun/testxf-console-574775bb5b-dnnqv\nevicting pod kubesphere-logging-system/elasticsearch-logging-discovery-1\nevicting pod savoir/savoir-bigscreen-67989dccc8-l26n5\n...\n...\nI0621 15:36:02.908180   13546 request.go:621] Throttling request took 1.199580189s, request: POST:https://10.8.30.157:6443/api/v1/namespaces/savoir/pods/savoir-webapi-6f677566b5-nt7ls/eviction\npod/anxinyun-config-center-65b7f88d5c-62zbk evicted\nI0621 15:36:13.006128   13546 request.go:621] Throttling request took 5.254427794s, request: GET:https://10.8.30.157:6443/api/v1/namespaces/anxinyun/pods/testxf-webapi-674b57b8d6-2896v\npod/logsidecar-injector-deploy-74c66bfd85-xsvcv evicted\npod/iota-mqtt-5dd58b8b84-rtlvb evicted\npod/iota-web-576b4965fc-99cm2 evicted\npod/flink-taskmanager-665b77b674-k5xsg evicted\npod/anxinyun-master-7974dfd46d-ttxxs evicted\npod/elasticsearch-logging-discovery-1 evicted\n...\n...\nnode/test-n4 evicted\n")),(0,a.kt)("pre",null,(0,a.kt)("code",r({parentName:"pre"},{className:"language-shell"})," $ kubectl get node \n NAME          STATUS                     ROLES    AGE    VERSION\n test-master   Ready                      master   307d   v1.18.8\n test-n1       Ready                      <none>   277d   v1.18.8\n test-n2       Ready                      <none>   307d   v1.18.8\n test-n3       Ready                      <none>   307d   v1.18.8\n test-n4       Ready,SchedulingDisabled   <none>   307d   v1.18.8\n test-n5       Ready                      <none>   307d   v1.18.8\n")),(0,a.kt)("p",null,"   \u4e0b\u9762\u8fde\u63a5\u5230 ",(0,a.kt)("inlineCode",{parentName:"p"},"test-n4")),(0,a.kt)("h2",r({},{id:"\u505c\u6b62-kubelet-\u548c-docker-\u670d\u52a1"}),"\u505c\u6b62 ",(0,a.kt)("inlineCode",{parentName:"h2"},"kubelet")," \u548c ",(0,a.kt)("inlineCode",{parentName:"h2"},"docker")," \u670d\u52a1"),(0,a.kt)("pre",null,(0,a.kt)("code",r({parentName:"pre"},{className:"language-shell"}),"$ systemctl stop kubelet\n$ systemctl stop docker\n")),(0,a.kt)("h2",r({},{id:"\u914d\u7f6e-containerd"}),"\u914d\u7f6e ",(0,a.kt)("inlineCode",{parentName:"h2"},"containerd")),(0,a.kt)("p",null,"   \u6ce8\u91ca\u6389 ",(0,a.kt)("inlineCode",{parentName:"p"},"/etc/containerd/config.toml"),"\u4e2d\u7684",(0,a.kt)("inlineCode",{parentName:"p"},"disabled_plugins"),"\u884c"),(0,a.kt)("p",null,"   \u6216\u8005 \u91cd\u65b0\u751f\u6210\u4e00\u4e2a\u65b0\u7684\u914d\u7f6e\u6587\u4ef6"),(0,a.kt)("pre",null,(0,a.kt)("code",r({parentName:"pre"},{className:"language-shell"}),"$ containerd config default > /etc/containerd/config.toml\n")),(0,a.kt)("h2",r({},{id:"\u91cd\u542f-containerd"}),"\u91cd\u542f ",(0,a.kt)("inlineCode",{parentName:"h2"},"containerd")),(0,a.kt)("pre",null,(0,a.kt)("code",r({parentName:"pre"},{className:"language-shell"}),"systemctl restart containerd\n")),(0,a.kt)("h2",r({},{id:"\u4fee\u6539-runtime"}),"\u4fee\u6539 ",(0,a.kt)("inlineCode",{parentName:"h2"},"runtime")),(0,a.kt)("p",null,"   \u7f16\u8f91 ",(0,a.kt)("inlineCode",{parentName:"p"},"/var/lib/kubelet/kubeadm-flags.env")," \uff0c\u589e\u52a0 ",(0,a.kt)("inlineCode",{parentName:"p"},"--container-runtime=remote")," \u548c ",(0,a.kt)("inlineCode",{parentName:"p"},"--container-runtimeendpoint=unix:///run/containerd/containerd.sock")),(0,a.kt)("pre",null,(0,a.kt)("code",r({parentName:"pre"},{className:"language-shell"}),'$ vi /var/lib/kubelet/kubeadm-flags.env\n\nKUBELET_KUBEADM_ARGS="--cgroup-driver=cgroupfs --network-plugin=cni --pod-infra-container-image=registry.aliyuncs.com/google_containers/pause:3.2"\n')),(0,a.kt)("pre",null,(0,a.kt)("code",r({parentName:"pre"},{}),'KUBELET_KUBEADM_ARGS="--cgroup-driver=cgroupfs --network-plugin=cni --pod-infra-container-image=registry.aliyuncs.com/google_containers/pause:3.2 --container-runtime=remote --container-runtime-endpoint=unix:///run/containerd/containerd.sock"\n')),(0,a.kt)("h2",r({},{id:"\u542f\u52a8-kubelet"}),"\u542f\u52a8 ",(0,a.kt)("inlineCode",{parentName:"h2"},"kubelet")),(0,a.kt)("pre",null,(0,a.kt)("code",r({parentName:"pre"},{className:"language-shell"}),"systemctl start kubelet\n")),(0,a.kt)("h2",r({},{id:"\u68c0\u67e5"}),"\u68c0\u67e5"),(0,a.kt)("pre",null,(0,a.kt)("code",r({parentName:"pre"},{className:"language-shell"}),"$ kubectl get node -o wide\nNAME          STATUS                     ROLES    AGE    VERSION   INTERNAL-IP   EXTERNAL-IP   OS-IMAGE             KERNEL-VERSION       CONTAINER-RUNTIME\ntest-master   Ready                      master   307d   v1.18.8   10.8.30.157   <none>        Ubuntu 18.04.5 LTS   4.15.0-122-generic   docker://19.3.12\ntest-n1       Ready                      <none>   277d   v1.18.8   10.8.30.152   <none>        Ubuntu 18.04.4 LTS   4.15.0-128-generic   docker://19.3.12\ntest-n2       Ready                      <none>   307d   v1.18.8   10.8.30.156   <none>        Ubuntu 18.04.4 LTS   4.15.0-128-generic   docker://19.3.12\ntest-n3       Ready                      <none>   307d   v1.18.8   10.8.30.155   <none>        Ubuntu 18.04.5 LTS   4.15.0-142-generic   docker://19.3.12\ntest-n4       Ready,SchedulingDisabled   <none>   307d   v1.18.8   10.8.30.161   <none>        Ubuntu 16.04.6 LTS   4.15.0-122-generic   containerd://1.2.13\ntest-n5       Ready                      <none>   307d   v1.18.8   10.8.30.158   <none>        Ubuntu 20.04.2 LTS   5.4.0-73-generic     docker://20.10.6\n")),(0,a.kt)("p",null,"   \u53ef\u4ee5\u770b\u5230 ",(0,a.kt)("inlineCode",{parentName:"p"},"containerd"),"\u662f\u6211\u4eec\u521a\u521a\u66f4\u6539\u7684\u8282\u70b9\u7684\u8fd0\u884c\u65f6\u4e86"),(0,a.kt)("h2",r({},{id:"\u6062\u590d\u8282\u70b9"}),"\u6062\u590d\u8282\u70b9"),(0,a.kt)("p",null,"   \u73b0\u5728\u53ef\u4ee5\u628a\u8282\u70b9\u6062\u590d\u8c03\u5ea6\u4e86"),(0,a.kt)("pre",null,(0,a.kt)("code",r({parentName:"pre"},{className:"language-shell"}),"$ kubectl uncordon test-n4\nnode/test-n4 uncordoned\n\n$ kubectl get node -o wide\nNAME          STATUS   ROLES    AGE    VERSION   INTERNAL-IP   EXTERNAL-IP   OS-IMAGE             KERNEL-VERSION       CONTAINER-RUNTIME\ntest-master   Ready    master   307d   v1.18.8   10.8.30.157   <none>        Ubuntu 18.04.5 LTS   4.15.0-122-generic   docker://19.3.12\ntest-n1       Ready    <none>   277d   v1.18.8   10.8.30.152   <none>        Ubuntu 18.04.4 LTS   4.15.0-128-generic   docker://19.3.12\ntest-n2       Ready    <none>   307d   v1.18.8   10.8.30.156   <none>        Ubuntu 18.04.4 LTS   4.15.0-128-generic   docker://19.3.12\ntest-n3       Ready    <none>   307d   v1.18.8   10.8.30.155   <none>        Ubuntu 18.04.5 LTS   4.15.0-142-generic   docker://19.3.12\ntest-n4       Ready    <none>   307d   v1.18.8   10.8.30.161   <none>        Ubuntu 16.04.6 LTS   4.15.0-122-generic   containerd://1.2.13\ntest-n5       Ready    <none>   307d   v1.18.8   10.8.30.158   <none>        Ubuntu 20.04.2 LTS   5.4.0-73-generic     docker://20.10.6\n\n")),(0,a.kt)("h2",r({},{id:"\u5220\u9664-docker--\u975e\u5fc5\u9700"}),"\u5220\u9664 ",(0,a.kt)("inlineCode",{parentName:"h2"},"docker"),"  (\u975e\u5fc5\u9700)"),(0,a.kt)("p",null,"   \u5982\u679c\u4e0d\u7528 ",(0,a.kt)("inlineCode",{parentName:"p"},"docker")," \u53ef\u4ee5\u628a\u5b83\u5378\u8f7d\u4e86"),(0,a.kt)("pre",null,(0,a.kt)("code",r({parentName:"pre"},{className:"language-shell"}),"$ apt-get purge docker-ce docker-ce-cli\n")),(0,a.kt)("p",null,"   \u73b0\u5728\u6211\u4eec\u5df2\u7ecf\u6210\u529f\u7684\u628a\u5de5\u4f5c\u8282\u70b9 ",(0,a.kt)("inlineCode",{parentName:"p"},"test-n4"),"\u7684\u5bb9\u5668\u8fd0\u884c\u65f6\u5207\u6362\u5230\u4e86 ",(0,a.kt)("inlineCode",{parentName:"p"},"containerd"),"\uff0c\u4e0b\u9762\u7ee7\u7eed\u4e0b\u4e00\u4e2a\u8282\u70b9\u91cd\u590d\u4e0a\u8ff0\u6b65\u9aa4\u3002"))}p.isMDXComponent=!0}}]);