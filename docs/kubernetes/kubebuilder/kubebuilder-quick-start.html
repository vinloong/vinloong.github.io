<!doctype html>
<html lang="zh-CN" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-kubernetes/kubebuilder/kubebuilder-quick-start">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.3.1">
<title data-rh="true">kubebuilder-quick-start | Loong&#x27;s Wiki</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://vinloong.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://vinloong.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://vinloong.github.io/docs/kubernetes/kubebuilder/kubebuilder-quick-start"><meta data-rh="true" name="docusaurus_locale" content="zh-CN"><meta data-rh="true" name="docsearch:language" content="zh-CN"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="kubebuilder-quick-start | Loong&#x27;s Wiki"><meta data-rh="true" name="description" content="[TOC]"><meta data-rh="true" property="og:description" content="[TOC]"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://vinloong.github.io/docs/kubernetes/kubebuilder/kubebuilder-quick-start"><link data-rh="true" rel="alternate" href="https://vinloong.github.io/docs/kubernetes/kubebuilder/kubebuilder-quick-start" hreflang="zh-CN"><link data-rh="true" rel="alternate" href="https://vinloong.github.io/docs/kubernetes/kubebuilder/kubebuilder-quick-start" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Loong&#39;s Wiki RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Loong&#39;s Wiki Atom Feed">
<link rel="alternate" type="application/json" href="/blog/feed.json" title="Loong&#39;s Wiki JSON Feed">






<link rel="stylesheet" href="/katex/katex.min.css"><link rel="stylesheet" href="/assets/css/styles.dfd1a4d8.css">
<link rel="preload" href="/assets/js/runtime~main.68f25493.js" as="script">
<link rel="preload" href="/assets/js/main.88d057a0.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<div role="region" aria-label="è·³åˆ°ä¸»è¦å†…å®¹"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">è·³åˆ°ä¸»è¦å†…å®¹</a></div><nav aria-label="ä¸»å¯¼èˆª" class="navbar navbar--fixed-top navbarHideable_m1mJ"><div class="navbar__inner"><div class="navbar__items"><button aria-label="åˆ‡æ¢å¯¼èˆªæ " aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Loong&#x27;s Wiki Logo" class="themedImage_ToTc themedImage--light_HNdA" height="32" width="32"><img src="/img/logo.svg" alt="Loong&#x27;s Wiki Logo" class="themedImage_ToTc themedImage--dark_i4oU" height="32" width="32"></div><b class="navbar__title text--truncate">Loong&#x27;s Wiki</b></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docs/category/docs">æ–‡æ¡£</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/kubernetes">kubernetes</a><a class="navbar__item navbar__link" href="/docs/linux">linux</a><a class="navbar__item navbar__link" href="/docs/dev&amp;ops/Jenkins-faq">dev&amp;ops</a><a class="navbar__item navbar__link" href="/docs/others/exerclse/01">others</a><a class="navbar__item navbar__link" href="/blog">åšå®¢</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">ğŸ”– å¸¸ç”¨ä¹¦ç­¾</a><ul class="dropdown__menu"><li class="dropdown-archived"><b>å¼€æºé•œåƒç«™</b></li><li><a href="https://mirrors.ustc.edu.cn" target="_blank" rel="noopener noreferrer" class="dropdown__link">ä¸­å›½ç§‘å­¦æŠ€æœ¯å¤§å­¦é•œåƒç«™<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://mirrors.huaweicloud.com" target="_blank" rel="noopener noreferrer" class="dropdown__link">åä¸ºå¼€æºé•œåƒç«™<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://developer.aliyun.com/mirror/" target="_blank" rel="noopener noreferrer" class="dropdown__link">é˜¿é‡Œé•œåƒç«™<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><a href="https://github.com/vinloong/wiki" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="åˆ‡æ¢æµ…è‰²/æš—é»‘æ¨¡å¼ï¼ˆå½“å‰ä¸ºæµ…è‰²æ¨¡å¼ï¼‰" aria-label="åˆ‡æ¢æµ…è‰²/æš—é»‘æ¨¡å¼ï¼ˆå½“å‰ä¸ºæµ…è‰²æ¨¡å¼ï¼‰" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="å›åˆ°é¡¶éƒ¨" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd sidebarWithHideableNavbar_wUlq"><a tabindex="-1" class="sidebarLogo_isFc" href="/"><img src="/img/logo.svg" alt="Loong&#x27;s Wiki Logo" class="themedImage_ToTc themedImage--light_HNdA" height="32" width="32"><img src="/img/logo.svg" alt="Loong&#x27;s Wiki Logo" class="themedImage_ToTc themedImage--dark_i4oU" height="32" width="32"><b>Loong&#x27;s Wiki</b></a><nav aria-label="æ–‡æ¡£ä¾§è¾¹æ " class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/kubernetes">README</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/kubernetes/api-resources-short">api-resources-short</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/kubernetes/certification/01">certification</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/kubernetes/containers/alpine-glibc">containers</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/kubernetes/helm/gitlab">helm</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/kubernetes/k8s-declarative-api">k8s å£°æ˜å¼ API ç®€ä»‹</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/kubernetes/k8s-del-or-add-node">k8s ç§»é™¤èŠ‚ç‚¹</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/kubernetes/k8s-docker-2-containerd">åˆ‡æ¢k8så®¹å™¨è¿è¡Œæ—¶ï¼šä»dockeråˆ°containerd</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/kubernetes/k8s-install">å•æœºç¯å¢ƒå®‰è£… k8s (åŸºäº cri-o)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/kubernetes/k8s-job-start">k8s-job-start</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/kubernetes/k8s-kubeconfig">kubeconfig quick start</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/kubernetes/k8s-kubectl-label">k8s-kubectl-label</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/kubernetes/k8s-storageclass">k8s-storageclass</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/kubernetes/k8s-upgrade">å‡çº§é›†ç¾¤</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/kubernetes/k8s_etcd">etcd faq</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/kubernetes/k8s-faq">k8s é›†ç¾¤éƒ¨åˆ†å¸¸è§é—®é¢˜åŠå¤„ç†</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/kubernetes/k8s_install">kubernetes quick start</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/kubernetes/k8sos">k8sos</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/kubernetes/kube-edge">edge cloud</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/kubernetes/kubebuilder/kubebuilder-quick-start">kubebuilder</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/kubernetes/kubebuilder/kubebuilder-quick-start">kubebuilder-quick-start</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/kubernetes/kubebuilder/quick-start">quick-start</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/kubernetes/kubectl-cm-cmds">å¸¸ç”¨çš„ kubectl å‘½ä»¤å’Œæ ‡å¿—</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/kubernetes/kubectl-conventions">kubectl-conventions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/kubernetes/microk8s">microk8s å…¥é—¨</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/kubernetes/minikube">minikube</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/kubernetes/pod">pod ç”Ÿå‘½å‘¨æœŸ</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/kubernetes/practice/argo">practice</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/kubernetes/reserve-compute-resources">reserve-compute-resources</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/kubernetes/sexy-tips">k8s ä½¿ç”¨çš„ä¸€äº›æŠ€å·§</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/kubernetes/storage/volumes">storage</a></div></li></ul></nav><button type="button" title="æ”¶èµ·ä¾§è¾¹æ " aria-label="æ”¶èµ·ä¾§è¾¹æ " class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="é¡µé¢è·¯å¾„"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="ä¸»é¡µé¢" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">kubebuilder</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">kubebuilder-quick-start</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">æœ¬é¡µæ€»è§ˆ</button></div><div class="theme-doc-markdown markdown"><header><h1>kubebuilder-quick-start</h1></header><p>[TOC]</p><h1>å®‰è£…</h1><p>linux/mac </p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic"># æˆ‘ä½¿ç”¨çš„ç‰ˆæœ¬æ˜¯ v3.1.0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#E36209">VERSION</span><span class="token operator" style="color:#D73A49">=</span><span class="token plain">v3.1.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic"># åˆ° https://github.com/kubernetes-sigs/kubebuilder/releases ä¸‹è½½ä¸ä½ æ“ä½œç³»ç»Ÿå¯¹åº”çš„ kubebuilder å®‰è£…åŒ…</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#8250DF">wget</span><span class="token plain"> https://github.com/kubernetes-sigs/kubebuilder/releases/download/</span><span class="token variable" style="color:#E36209">$(</span><span class="token variable" style="color:#E36209">VERSION</span><span class="token variable" style="color:#E36209">)</span><span class="token plain">/kubebuilder_</span><span class="token variable" style="color:#E36209">$(</span><span class="token variable" style="color:#E36209">go </span><span class="token variable function" style="color:#8250DF">env</span><span class="token variable" style="color:#E36209"> GOOS</span><span class="token variable" style="color:#E36209">)</span><span class="token plain">_</span><span class="token variable" style="color:#E36209">$(</span><span class="token variable" style="color:#E36209">go </span><span class="token variable function" style="color:#8250DF">env</span><span class="token variable" style="color:#E36209"> GOARCH</span><span class="token variable" style="color:#E36209">)</span><span class="token plain"> -O kubebuilder</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic"># æˆ–ä½¿ç”¨ä¸‹é¢å‘½ä»¤ä¸‹è½½</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#8250DF">curl</span><span class="token plain"> -L -o kubebuilder https://go.kubebuilder.io/dl/latest/</span><span class="token variable" style="color:#E36209">$(</span><span class="token variable" style="color:#E36209">go </span><span class="token variable function" style="color:#8250DF">env</span><span class="token variable" style="color:#E36209"> GOOS</span><span class="token variable" style="color:#E36209">)</span><span class="token plain">/</span><span class="token variable" style="color:#E36209">$(</span><span class="token variable" style="color:#E36209">go </span><span class="token variable function" style="color:#8250DF">env</span><span class="token variable" style="color:#E36209"> GOARCH</span><span class="token variable" style="color:#E36209">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic"># è§£å‹åˆ° /usr/local/bin/</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic"># è§£å‹åˆ°è¿™é‡Œä¸ç”¨è‡ªå·±æ·»åŠ ç¯å¢ƒå˜é‡ï¼Œå¦‚æœæ˜¯è‡ªå®šä¹‰çš„ç›®å½•ï¼Œè¿˜éœ€è¦å°†å…¶åŠ å…¥åˆ°ç¯å¢ƒå˜é‡ path ä¸­</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#8250DF">chmod</span><span class="token plain"> +x kubebuilder </span><span class="token operator" style="color:#D73A49">&amp;&amp;</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">mv</span><span class="token plain"> kubebuilder /usr/local/bin/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>windows </p><div class="language-cmd codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cmd codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># windows ä¸‹æ²¡æœ‰å¯¹åº”çš„å®‰è£…åŒ…ï¼Œéœ€è¦è‡ªå·±æŠŠä»£ç ä¸‹ä¸‹æ¥ï¼Œè‡ªå·±ç¼–è¯‘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># ç”±äºwindows ç‰ˆæœ¬æ²¡æœ‰è„šæœ¬åœ¨åˆ›å»ºapiçš„æ—¶å€™ä¼šæŠ¥é”™ï¼Œæ‰€ä»¥å»ºè®®è¿˜æ˜¯ä½¿ç”¨linux ç‰ˆæœ¬</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">git clone git@github.com:kubernetes-sigs/kubebuilder</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cd kubebuilder</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">go build -o kubebuilder.exe ./cmd/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>åˆ›å»ºä¸€ä¸ªé¡¹ç›®</h1><p> åˆ›å»ºä¸€ä¸ªç›®å½•ï¼Œåœ¨é‡Œé¢æ‰§è¡Œ <code>kubebuilder init</code> å‘½ä»¤ï¼Œåˆå§‹åŒ–ä¸€ä¸ªæ–°é¡¹ç›®ã€‚</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#8250DF">mkdir</span><span class="token plain"> -p ~/projects/guestbook</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name" style="color:#116329">cd</span><span class="token plain"> ~/projects/guestbook</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">go mod init guestbook/m/v2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubebuilder init --domain my.domain --repo my.domain/guestbook</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">#kubebuilder init --domain dragon.io</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ä¸€ä¸ªåŸºç¡€é¡¹ç›®é‡Œéƒ½æœ‰ä»€ä¹ˆ">ä¸€ä¸ªåŸºç¡€é¡¹ç›®é‡Œéƒ½æœ‰ä»€ä¹ˆï¼Ÿ<a href="#ä¸€ä¸ªåŸºç¡€é¡¹ç›®é‡Œéƒ½æœ‰ä»€ä¹ˆ" class="hash-link" aria-label="ä¸€ä¸ªåŸºç¡€é¡¹ç›®é‡Œéƒ½æœ‰ä»€ä¹ˆï¼Ÿçš„ç›´æ¥é“¾æ¥" title="ä¸€ä¸ªåŸºç¡€é¡¹ç›®é‡Œéƒ½æœ‰ä»€ä¹ˆï¼Ÿçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>å½“è„šæ‰‹æ¶ä¸ºæˆ‘ä»¬è‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªæ–°çš„é¡¹ç›®æ—¶ï¼Œkubebuilder ä¸ºæˆ‘ä»¬å‡†å¤‡å¥½äº†ä¸€äº›åŸºç¡€çš„æ¨¡æ¿æ–‡ä»¶ã€‚</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="æ„å»ºåŸºç¡€ç»„ä»¶">æ„å»ºåŸºç¡€ç»„ä»¶<a href="#æ„å»ºåŸºç¡€ç»„ä»¶" class="hash-link" aria-label="æ„å»ºåŸºç¡€ç»„ä»¶çš„ç›´æ¥é“¾æ¥" title="æ„å»ºåŸºç¡€ç»„ä»¶çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>é¦–å…ˆæ˜¯ä¸ºæ„å»ºå‡†å¤‡çš„ä¸€äº›åŸºæœ¬çš„é¡¹ç›®æ–‡ä»¶</p><ul><li><p><code>go.mod</code> :   Go mod é…ç½®æ–‡ä»¶ï¼Œè®°å½•ä¾èµ–åº“ä¿¡æ¯</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">module dragon</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">com</span><span class="token operator" style="color:#D73A49">/</span><span class="token plain">guestbook</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#CF222E">go</span><span class="token plain"> </span><span class="token number" style="color:#005CC5">1.16</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">require </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    github</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">com</span><span class="token operator" style="color:#D73A49">/</span><span class="token plain">onsi</span><span class="token operator" style="color:#D73A49">/</span><span class="token plain">ginkgo v1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token number" style="color:#005CC5">14.1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    github</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">com</span><span class="token operator" style="color:#D73A49">/</span><span class="token plain">onsi</span><span class="token operator" style="color:#D73A49">/</span><span class="token plain">gomega v1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token number" style="color:#005CC5">10.2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    k8s</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">io</span><span class="token operator" style="color:#D73A49">/</span><span class="token plain">apimachinery v0</span><span class="token punctuation" style="color:#393A34">.</span><span class="token number" style="color:#005CC5">20.2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    k8s</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">io</span><span class="token operator" style="color:#D73A49">/</span><span class="token plain">client</span><span class="token operator" style="color:#D73A49">-</span><span class="token keyword" style="color:#CF222E">go</span><span class="token plain"> v0</span><span class="token punctuation" style="color:#393A34">.</span><span class="token number" style="color:#005CC5">20.2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    sigs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">k8s</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">io</span><span class="token operator" style="color:#D73A49">/</span><span class="token plain">controller</span><span class="token operator" style="color:#D73A49">-</span><span class="token plain">runtime v0</span><span class="token punctuation" style="color:#393A34">.</span><span class="token number" style="color:#005CC5">8.3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ul><ul><li><p><code>Makefile</code>: ç”¨äºæ„å»ºå’Œéƒ¨ç½²ä½ çš„<em>controller</em>çš„ Makefile æ–‡ä»¶</p><div class="language-cmake codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cmake codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Image URL to use all building/pushing image targets</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">IMG ?= controller:latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Produce CRDs that work back to Kubernetes 1.11 (no version conversion)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CRD_OPTIONS ?= &quot;crd:trivialVersions=true,preserveUnknownFields=false&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Get the currently used golang install path (in GOPATH/bin, unless GOBIN is set)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ifeq (,$(shell go env GOBIN))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">GOBIN=$(shell go env GOPATH)/bin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">else</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">GOBIN=$(shell go env GOBIN)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">endif</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Setting SHELL to bash allows bash commands to be executed by recipes.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># This is a requirement for &#x27;setup-envtest.sh&#x27; in the test target.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Options are set to exit when a recipe line exits non-zero or a piped command fails.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SHELL = /usr/bin/env bash -o pipefail</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.SHELLFLAGS = -ec</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">all: build</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">##@ General</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># The help target prints out all targets with their descriptions organized</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># beneath their categories. The categories are represented by &#x27;##@&#x27; and the</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># target descriptions by &#x27;##&#x27;. The awk commands is responsible for reading the</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># entire set of makefiles included in this invocation, looking for lines of the</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># file as xyz: ## something, and then pretty-format the target and help. Then,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># if there&#x27;s a line with ##@ something, that gets pretty-printed as a category.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># More info on the usage of ANSI control characters for terminal formatting:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># https://en.wikipedia.org/wiki/ANSI_escape_code#SGR_parameters</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># More info on the awk command:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># http://linuxcommand.org/lc3_adv_awk.php</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">help: ## Display this help.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @awk &#x27;BEGIN {FS = &quot;:.*##&quot;; printf &quot;\nUsage:\n  make \033[36m&lt;target&gt;\033[0m\n&quot;} /^[a-zA-Z_0-9-]+:.*?##/ { printf &quot;  \033[36m%-15s\033[0m %s\n&quot;, $$1, $$2 } /^##@/ { printf &quot;\n\033[1m%s\033[0m\n&quot;, substr($$0, 5) } &#x27; $(MAKEFILE_LIST)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">##@ Development</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">manifests: controller-gen ## Generate WebhookConfiguration, ClusterRole and CustomResourceDefinition objects.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    $(CONTROLLER_GEN) $(CRD_OPTIONS) rbac:roleName=manager-role webhook paths=&quot;./...&quot; output:crd:artifacts:config=config/crd/bases</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">generate: controller-gen ## Generate code containing DeepCopy, DeepCopyInto, and DeepCopyObject method implementations.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    $(CONTROLLER_GEN) object:headerFile=&quot;hack/boilerplate.go.txt&quot; paths=&quot;./...&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fmt: ## Run go fmt against code.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    go fmt ./...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">vet: ## Run go vet against code.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    go vet ./...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ENVTEST_ASSETS_DIR=$(shell pwd)/testbin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">test: manifests generate fmt vet ## Run tests.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mkdir -p ${ENVTEST_ASSETS_DIR}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    test -f ${ENVTEST_ASSETS_DIR}/setup-envtest.sh || curl -sSLo ${ENVTEST_ASSETS_DIR}/setup-envtest.sh https://raw.githubusercontent.com/kubernetes-sigs/controller-runtime/v0.8.3/hack/setup-envtest.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    source ${ENVTEST_ASSETS_DIR}/setup-envtest.sh; fetch_envtest_tools $(ENVTEST_ASSETS_DIR); setup_envtest_env $(ENVTEST_ASSETS_DIR); go test ./... -coverprofile cover.out</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">##@ Build</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">build: generate fmt vet ## Build manager binary.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    go build -o bin/manager main.go</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">run: manifests generate fmt vet ## Run a controller from your host.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    go run ./main.go</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">docker-build: test ## Build docker image with the manager.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    docker build -t ${IMG} .</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">docker-push: ## Push docker image with the manager.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    docker push ${IMG}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">##@ Deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">install: manifests kustomize ## Install CRDs into the K8s cluster specified in ~/.kube/config.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    $(KUSTOMIZE) build config/crd | kubectl apply -f -</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">uninstall: manifests kustomize ## Uninstall CRDs from the K8s cluster specified in ~/.kube/config.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    $(KUSTOMIZE) build config/crd | kubectl delete -f -</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deploy: manifests kustomize ## Deploy controller to the K8s cluster specified in ~/.kube/config.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cd config/manager &amp;&amp; $(KUSTOMIZE) edit set image controller=${IMG}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    $(KUSTOMIZE) build config/default | kubectl apply -f -</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">undeploy: ## Undeploy controller from the K8s cluster specified in ~/.kube/config.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    $(KUSTOMIZE) build config/default | kubectl delete -f -</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CONTROLLER_GEN = $(shell pwd)/bin/controller-gen</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">controller-gen: ## Download controller-gen locally if necessary.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    $(call go-get-tool,$(CONTROLLER_GEN),sigs.k8s.io/controller-tools/cmd/controller-gen@v0.4.1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">KUSTOMIZE = $(shell pwd)/bin/kustomize</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kustomize: ## Download kustomize locally if necessary.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    $(call go-get-tool,$(KUSTOMIZE),sigs.k8s.io/kustomize/kustomize/v3@v3.8.7)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># go-get-tool will &#x27;go get&#x27; any package $2 and install it to $1.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">PROJECT_DIR := $(shell dirname $(abspath $(lastword $(MAKEFILE_LIST))))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">define go-get-tool</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@[ -f $(1) ] || { \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">set -e ;\</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TMP_DIR=$$(mktemp -d) ;\</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cd $$TMP_DIR ;\</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">go mod init tmp ;\</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo &quot;Downloading $(2)&quot; ;\</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">GOBIN=$(PROJECT_DIR)/bin go get $(2) ;\</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rm -rf $$TMP_DIR ;\</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">endef</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ul><ul><li><p><code>PROJECT</code>:  ç”¨äºç”Ÿæˆç»„ä»¶çš„ Kubebuilder å…ƒæ•°æ®</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#22863A">domain</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> dragon.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#22863A">layout</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> go.kubebuilder.io/v3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#22863A">projectName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> guestbook</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#22863A">repo</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> dragon.com/guestbook</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#22863A">resources</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#22863A">api</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#22863A">crdVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#22863A">namespaced</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#005CC5">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#22863A">controller</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#005CC5">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#22863A">domain</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> dragon.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#22863A">group</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> webapp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#22863A">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Guestbook</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#22863A">path</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> dragon.com/guestbook/api/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#22863A">version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#22863A">version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;3&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="å¯åŠ¨é…ç½®">å¯åŠ¨é…ç½®<a href="#å¯åŠ¨é…ç½®" class="hash-link" aria-label="å¯åŠ¨é…ç½®çš„ç›´æ¥é“¾æ¥" title="å¯åŠ¨é…ç½®çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>æˆ‘ä»¬è¿˜å¯ä»¥åœ¨ <em><code>config/</code></em> ç›®å½•ä¸‹è·å¾—å¯åŠ¨é…ç½®ã€‚ç°åœ¨ï¼Œå®ƒåªåŒ…å«äº†åœ¨é›†ç¾¤ä¸Šå¯åŠ¨æ§åˆ¶å™¨æ‰€éœ€çš„ <em><code>Kustomize</code></em> YAML é…ç½®ä¸­å®šä¹‰ï¼Œä½†ä¸€æ—¦æˆ‘ä»¬å¼€å§‹ç¼–å†™æ§åˆ¶å™¨ï¼Œå®ƒè¿˜å°†åŒ…å«æˆ‘ä»¬çš„ CustomResourceDefinitions(CRD) ã€RBAC é…ç½®å’Œ WebhookConfigurations ã€‚</p><p><em><code>config/default</code></em> ä¸­åŒ…å«<code> Kustomize base</code>ç”¨äºå¯åŠ¨<code>controller</code> çš„ä¸€äº›æ ‡å‡†é…ç½®ã€‚</p><p>å…¶ä»–æ¯ä¸ªç›®å½•éƒ½åŒ…å«ä¸€ä¸ªä¸åŒçš„é…ç½®ï¼Œé‡æ„ä¸ºè‡ªå·±çš„åŸºç¡€ã€‚</p><ul><li><em><code>config/manager</code></em>: åœ¨é›†ç¾¤ä¸­ä»¥ pod çš„å½¢å¼å¯åŠ¨<code>controller</code></li><li><em><code>config/rbac</code></em>: åœ¨è‡ªå·±çš„è´¦æˆ·ä¸‹è¿è¡Œ<code>controller</code>æ‰€éœ€çš„æƒé™</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ç¨‹åºå…¥å£">ç¨‹åºå…¥å£<a href="#ç¨‹åºå…¥å£" class="hash-link" aria-label="ç¨‹åºå…¥å£çš„ç›´æ¥é“¾æ¥" title="ç¨‹åºå…¥å£çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>æœ€åï¼Œæœ€é‡è¦çš„ä¸€ç‚¹ï¼Œ<code>kubebuilder</code> ç”Ÿæˆä¸€ä¸ªé¡¹ç›®ç¨‹åºå…¥å£: <code>main.go</code>ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æ¥çœ‹çœ‹å®ƒã€‚ã€‚ã€‚</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ä»»ä½•ä¸€æ®µæ—…ç¨‹éƒ½éœ€è¦ä¸€ä¸ªèµ·ç‚¹æ¯ä¸€ä¸ªç¨‹åºéƒ½éœ€è¦ä¸€ä¸ªå…¥å£å‡½æ•°">ä»»ä½•ä¸€æ®µæ—…ç¨‹éƒ½éœ€è¦ä¸€ä¸ªèµ·ç‚¹ï¼Œæ¯ä¸€ä¸ªç¨‹åºéƒ½éœ€è¦ä¸€ä¸ªå…¥å£å‡½æ•°<a href="#ä»»ä½•ä¸€æ®µæ—…ç¨‹éƒ½éœ€è¦ä¸€ä¸ªèµ·ç‚¹æ¯ä¸€ä¸ªç¨‹åºéƒ½éœ€è¦ä¸€ä¸ªå…¥å£å‡½æ•°" class="hash-link" aria-label="ä»»ä½•ä¸€æ®µæ—…ç¨‹éƒ½éœ€è¦ä¸€ä¸ªèµ·ç‚¹ï¼Œæ¯ä¸€ä¸ªç¨‹åºéƒ½éœ€è¦ä¸€ä¸ªå…¥å£å‡½æ•°çš„ç›´æ¥é“¾æ¥" title="ä»»ä½•ä¸€æ®µæ—…ç¨‹éƒ½éœ€è¦ä¸€ä¸ªèµ·ç‚¹ï¼Œæ¯ä¸€ä¸ªç¨‹åºéƒ½éœ€è¦ä¸€ä¸ªå…¥å£å‡½æ•°çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>main æ–‡ä»¶å¼€å§‹æ˜¯ import ä¸€äº›åŸºæœ¬åº“, å°¤å…¶æ˜¯</p><ul><li>æ ¸å¿ƒæ§åˆ¶å™¨è¿è¡Œæ—¶åº“</li><li>é»˜è®¤çš„æ§åˆ¶å™¨è¿è¡Œæ—¶æ—¥å¿—åº“ --- zap</li></ul><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#CF222E">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    webappv1 </span><span class="token string" style="color:#C6105F">&quot;dragon.com/guestbook/api/v1&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#C6105F">&quot;dragon.com/guestbook/controllers&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#C6105F">&quot;flag&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#C6105F">&quot;k8s.io/apimachinery/pkg/runtime&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    utilruntime </span><span class="token string" style="color:#C6105F">&quot;k8s.io/apimachinery/pkg/util/runtime&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    clientgoscheme </span><span class="token string" style="color:#C6105F">&quot;k8s.io/client-go/kubernetes/scheme&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token boolean" style="color:#005CC5">_</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;k8s.io/client-go/plugin/pkg/client/auth&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#C6105F">&quot;os&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ctrl </span><span class="token string" style="color:#C6105F">&quot;sigs.k8s.io/controller-runtime&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#C6105F">&quot;sigs.k8s.io/controller-runtime/pkg/healthz&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#C6105F">&quot;sigs.k8s.io/controller-runtime/pkg/log/zap&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#6B6B6B;font-style:italic">//+kubebuilder:scaffold:imports</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æ¯ä¸€ç»„æ§åˆ¶å™¨éƒ½éœ€è¦ä¸€ä¸ª <em>Scheme</em>ï¼Œå®ƒæä¾›äº† Kinds å’Œç›¸åº”çš„ Go ç±»å‹ä¹‹é—´çš„æ˜ å°„ã€‚æˆ‘ä»¬å°†åœ¨ç¼–å†™ API å®šä¹‰çš„æ—¶å€™å†è°ˆä¸€è°ˆ Kindsï¼Œæ‰€ä»¥ç°åœ¨åªéœ€è¦è®°ä½å®ƒå°±å¥½ã€‚</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#CF222E">var</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    scheme   </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> runtime</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">NewScheme</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    setupLog </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> ctrl</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Log</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">WithName</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#C6105F">&quot;setup&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#CF222E">func</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">init</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    utilruntime</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">Must</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">clientgoscheme</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">AddToScheme</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">scheme</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    utilruntime</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">Must</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">webappv1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">AddToScheme</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">scheme</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#6B6B6B;font-style:italic">//+kubebuilder:scaffold:scheme</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>è¿™æ®µä»£ç çš„æ ¸å¿ƒé€»è¾‘æ¯”è¾ƒç®€å•ï¼š</p><ul><li>æˆ‘ä»¬é€šè¿‡ flag åº“è§£æå…¥å‚</li><li>æˆ‘ä»¬å®ä¾‹åŒ–ä¸€ä¸ª manager ,å®ƒè®°å½•äº†æˆ‘ä»¬æ‰€æœ‰æ§åˆ¶å™¨çš„è¿è¡Œæƒ…å†µï¼Œä»¥åŠè®¾ç½®å…±äº«ç¼“å­˜å’ŒAPI æœåŠ¡å™¨çš„å®¢æˆ·ç«¯ï¼Œï¼ˆæ³¨æ„ï¼Œæˆ‘ä»¬æŠŠæˆ‘ä»¬çš„ Scheme çš„ä¿¡æ¯å‘Šè¯‰äº† managerï¼‰</li><li>è¿è¡Œ manager ï¼Œå®ƒåè¿‡æ¥è¿è¡Œæˆ‘ä»¬æ‰€æœ‰çš„æ§åˆ¶å™¨å’Œ webhooks ã€‚mangager çŠ¶æ€è¢«è®¾ç½®ä¸º Runing ï¼Œç›´åˆ°å®ƒæ”¶åˆ°ä¸€ä¸ªä¼˜é›…çš„åœæœºä¿¡å·ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥åœ¨k8s ä¸Šè¿è¡Œæ—¶appæ—¶ï¼Œå¯ä»¥ä¼˜é›…çš„åœæ­¢pod.</li></ul><p>ç°åœ¨æˆ‘ä»¬è¿˜æ²¡è¿è¡Œä»»ä½•ä»£ç ï¼Œä½†æ˜¯è¯·è®°ä½è¿™ä¸ªæ³¨é‡Š <code>//+kubebuilder:scaffold:scheme</code></p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#CF222E">func</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#CF222E">var</span><span class="token plain"> metricsAddr </span><span class="token builtin">string</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#CF222E">var</span><span class="token plain"> enableLeaderElection </span><span class="token builtin">bool</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#CF222E">var</span><span class="token plain"> probeAddr </span><span class="token builtin">string</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    flag</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">StringVar</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#D73A49">&amp;</span><span class="token plain">metricsAddr</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;metrics-bind-address&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;:8080&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;The address the metric endpoint binds to.&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    flag</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">StringVar</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#D73A49">&amp;</span><span class="token plain">probeAddr</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;health-probe-bind-address&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;:8081&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;The address the probe endpoint binds to.&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    flag</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">BoolVar</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#D73A49">&amp;</span><span class="token plain">enableLeaderElection</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;leader-elect&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#005CC5">false</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#C6105F">&quot;Enable leader election for controller manager. &quot;</span><span class="token operator" style="color:#D73A49">+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string" style="color:#C6105F">&quot;Enabling this will ensure there is only one active controller manager.&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    opts </span><span class="token operator" style="color:#D73A49">:=</span><span class="token plain"> zap</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Options</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Development</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#005CC5">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    opts</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">BindFlags</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">flag</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">CommandLine</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    flag</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">Parse</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ctrl</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">SetLogger</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">zap</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">New</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">zap</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">UseFlagOptions</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#D73A49">&amp;</span><span class="token plain">opts</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mgr</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err </span><span class="token operator" style="color:#D73A49">:=</span><span class="token plain"> ctrl</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">NewManager</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ctrl</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">GetConfigOrDie</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ctrl</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Options</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Scheme</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">                 scheme</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        MetricsBindAddress</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">     metricsAddr</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">                   </span><span class="token number" style="color:#005CC5">9443</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        HealthProbeBindAddress</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> probeAddr</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        LeaderElection</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">         enableLeaderElection</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        LeaderElectionID</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">       </span><span class="token string" style="color:#C6105F">&quot;bcb35137.dragon.com&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#CF222E">if</span><span class="token plain"> err </span><span class="token operator" style="color:#D73A49">!=</span><span class="token plain"> </span><span class="token boolean" style="color:#005CC5">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        setupLog</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">Error</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">err</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;unable to start manager&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        os</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">Exit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#005CC5">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#CF222E">if</span><span class="token plain"> err </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#D73A49">&amp;</span><span class="token plain">controllers</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">GuestbookReconciler</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Client</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> mgr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">GetClient</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Scheme</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> mgr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">GetScheme</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">SetupWithManager</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">mgr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> err </span><span class="token operator" style="color:#D73A49">!=</span><span class="token plain"> </span><span class="token boolean" style="color:#005CC5">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        setupLog</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">Error</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">err</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;unable to create controller&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;controller&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;Guestbook&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        os</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">Exit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#005CC5">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#6B6B6B;font-style:italic">//+kubebuilder:scaffold:builder</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#CF222E">if</span><span class="token plain"> err </span><span class="token operator" style="color:#D73A49">:=</span><span class="token plain"> mgr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">AddHealthzCheck</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#C6105F">&quot;healthz&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> healthz</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Ping</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> err </span><span class="token operator" style="color:#D73A49">!=</span><span class="token plain"> </span><span class="token boolean" style="color:#005CC5">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        setupLog</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">Error</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">err</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;unable to set up health check&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        os</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">Exit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#005CC5">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#CF222E">if</span><span class="token plain"> err </span><span class="token operator" style="color:#D73A49">:=</span><span class="token plain"> mgr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">AddReadyzCheck</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#C6105F">&quot;readyz&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> healthz</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Ping</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> err </span><span class="token operator" style="color:#D73A49">!=</span><span class="token plain"> </span><span class="token boolean" style="color:#005CC5">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        setupLog</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">Error</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">err</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;unable to set up ready check&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        os</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">Exit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#005CC5">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    setupLog</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">Info</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#C6105F">&quot;starting manager&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#CF222E">if</span><span class="token plain"> err </span><span class="token operator" style="color:#D73A49">:=</span><span class="token plain"> mgr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">Start</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ctrl</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">SetupSignalHandler</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> err </span><span class="token operator" style="color:#D73A49">!=</span><span class="token plain"> </span><span class="token boolean" style="color:#005CC5">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        setupLog</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">Error</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">err</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;problem running manager&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        os</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">Exit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#005CC5">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æ³¨æ„ï¼šManager å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼é™åˆ¶æ§åˆ¶å™¨å¯ä»¥ç›‘å¬èµ„æºçš„å‘½åç©ºé—´ï¼š</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    mgr</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err </span><span class="token operator" style="color:#D73A49">:=</span><span class="token plain"> ctrl</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">NewManager</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ctrl</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">GetConfigOrDie</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ctrl</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Options</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Scheme</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">                 scheme</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">          namespace</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        MetricsBindAddress</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">     metricsAddr</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">                   </span><span class="token number" style="color:#005CC5">9443</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        HealthProbeBindAddress</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> probeAddr</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        LeaderElection</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">         enableLeaderElection</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        LeaderElectionID</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">       </span><span class="token string" style="color:#C6105F">&quot;bcb35137.dragon.com&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ä¸Šé¢çš„æ —å­æŠŠä½ çš„é¡¹ç›®æ”¹æˆäº†åªç›‘å¬å•ä¸€å‘½åç©ºé—´ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå»ºè®®é€šè¿‡é»˜è®¤çš„ ClusterRole å’Œ ClusterRoleBinding åˆ†åˆ«æ›¿æ¢ä¸º Role å’Œ RoleBinding æ¥é™åˆ¶æ‰€æä¾›ç»™è¿™ä¸ªå‘½åç©ºé—´çš„æˆæƒã€‚</p><p>å¦å¤–ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ MultiNamespacedCacheBuilder æ¥ç›‘å¬ç‰¹å®šçš„å‘½åç©ºé—´ã€‚</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token keyword" style="color:#CF222E">var</span><span class="token plain"> namespaces </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token builtin">string</span><span class="token plain"> </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// List of Namespaces</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mgr</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> ctrl</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">NewManager</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ctrl</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">GetConfigOrDie</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ctrl</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Options</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Scheme</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">             scheme</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        NewCache</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">           cache</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">MultiNamespacedCacheBuilder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">namespaces</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        MetricsBindAddress</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> fmt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">Sprintf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#C6105F">&quot;%s:%d&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> metricsHost</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> metricsPort</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>è¯´å®Œè¿™äº›ï¼Œæˆ‘ä»¬å¯ä»¥å¼€å§‹åˆ›å»ºæˆ‘ä»¬çš„ API äº†ã€‚</p><h1>GVK ä»‹ç»</h1><p>åœ¨æˆ‘ä»¬å¼€å§‹è¯´ API ä¹‹å‰ï¼Œæˆ‘ä»¬åº”è¯¥å…ˆä»‹ç»ä¸‹ k8s ä¸­ API çš„ç›¸å…³æœ¯è¯­</p><p>æˆ‘ä»¬åœ¨è°ˆè®º k8s çš„API æˆ‘ä»¬ç»å¸¸ä¼šæåˆ° ä¸‹é¢4ä¸ªæœ¯è¯­ï¼š groups ã€versions ã€kinds å’Œ resources ã€‚</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ç»„å’Œç‰ˆæœ¬">ç»„å’Œç‰ˆæœ¬<a href="#ç»„å’Œç‰ˆæœ¬" class="hash-link" aria-label="ç»„å’Œç‰ˆæœ¬çš„ç›´æ¥é“¾æ¥" title="ç»„å’Œç‰ˆæœ¬çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>k8s ä¸­çš„API ç»„ç®€å•æ¥è¯´å°±æ˜¯ç›¸å…³åŠŸèƒ½çš„é›†åˆã€‚æ¯ä¸ªç»„éƒ½æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªç‰ˆæœ¬ï¼Œé¡¾åæ€ä¹‰ï¼Œå®ƒå…è®¸æˆ‘ä»¬éšè¿™æ—¶é—´çš„æ¨ç§»æ”¹å˜ API çš„èŒè´£ã€‚</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ç±»å‹å’Œèµ„æº">ç±»å‹å’Œèµ„æº<a href="#ç±»å‹å’Œèµ„æº" class="hash-link" aria-label="ç±»å‹å’Œèµ„æºçš„ç›´æ¥é“¾æ¥" title="ç±»å‹å’Œèµ„æºçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>æ¯ä¸ªAPI ç»„-ç‰ˆæœ¬åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªAPI ç±»å‹ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸º Kindsã€‚ è™½ç„¶ä¸€ä¸ª Kind å¯ä»¥åœ¨ä¸åŒç‰ˆæœ¬ä¹‹é—´æ”¹å˜è¡¨å•å†…å®¹, ä½†æ¯ä¸ªè¡¨å•å¿…é¡»èƒ½å¤Ÿä»¥æŸç§æ–¹å¼å­˜å‚¨å…¶ä»–è¡¨å•çš„æ‰€æœ‰æ•°æ®(æˆ‘ä»¬å¯ä»¥æŠŠæ•°æ®å­˜å‚¨åœ¨å­—æ®µä¸­æˆ–è€…åœ¨æ³¨é‡Šä¸­)ã€‚è¿™æ ·åœ¨ä½¿ç”¨æ—§ç‰ˆçš„API ç‰ˆæœ¬ä¸ä¼šå¯¼è‡´æ–°çš„æ•°æ®ä¸¢å¤±æˆ–æŸå¤±ã€‚</p><p>ä½ ä¹Ÿä¼šå¶å°”å¬åˆ° <code>resources</code>ã€‚ <code>resources</code> (èµ„æº) åªæ˜¯API ä¸­çš„ä¸€ä¸ªkind çš„ä½¿ç”¨æ–¹å¼ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼ŒKind å’Œ resource ä¹‹é—´æœ‰ä¸€ä¸ªä¸€å¯¹ä¸€çš„æ˜ å°„ã€‚ä¾‹å¦‚ï¼Œ<code>pods</code> èµ„æºå¯¹åº”äº <code>Pod</code> ç§ç±»ã€‚ä½†æ˜¯æœ‰æ—¶ï¼ŒåŒä¸€ç±»å‹å¯èƒ½ç”±å¤šä¸ªèµ„æºè¿”å›ã€‚ä¾‹å¦‚ï¼Œ<code>Scale</code> Kind æ˜¯ç”±æ‰€æœ‰ <code>scale</code> å­èµ„æºè¿”å›çš„ï¼Œå¦‚ <code>deployments/scale</code> æˆ– <code>replicasets/scale</code>ã€‚è¿™å°±æ˜¯å…è®¸ Kubernetes HorizontalPodAutoscaler(HPA) ä¸ä¸åŒèµ„æºäº¤äº’çš„åŸå› ã€‚ç„¶è€Œï¼Œä½¿ç”¨ CRDï¼Œæ¯ä¸ª Kind éƒ½å°†å¯¹åº”ä¸€ä¸ª resourcesã€‚</p><p>æ³¨æ„ï¼šresource æ€»æ˜¯å°å†™ï¼ŒæŒ‰ç…§æƒ¯ä¾‹æ˜¯ kind çš„å°å†™å½¢å¼ã€‚</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">GVK = Group Version Kind GVR = Group Version Resources</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å½“æˆ‘ä»¬åœ¨ä¸€ä¸ªç‰¹å®šçš„ç¾¤ç»„ç‰ˆæœ¬ (Group-Version) ä¸­æåˆ°ä¸€ä¸ª Kind æ—¶ï¼Œæˆ‘ä»¬ä¼šæŠŠå®ƒç§°ä¸º <strong>GroupVersionKind</strong>ï¼Œç®€ç§° GVKã€‚ä¸ èµ„æº (resources) å’Œ GVR ä¸€æ ·ï¼Œæˆ‘ä»¬å¾ˆå¿«å°±ä¼šçœ‹åˆ°ï¼Œæ¯ä¸ª GVK å¯¹åº” Golang ä»£ç ä¸­çš„åˆ°å¯¹åº”ç”Ÿæˆä»£ç ä¸­çš„ Go typeã€‚</p><p>ç°åœ¨æˆ‘ä»¬ç†è§£äº†è¿™äº›æœ¯è¯­ï¼Œæˆ‘ä»¬å°±å¯ä»¥<strong>çœŸæ­£</strong>åœ°åˆ›å»ºæˆ‘ä»¬çš„ APIï¼</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="scheme-æ˜¯ä»€ä¹ˆ">Scheme æ˜¯ä»€ä¹ˆï¼Ÿ<a href="#scheme-æ˜¯ä»€ä¹ˆ" class="hash-link" aria-label="Scheme æ˜¯ä»€ä¹ˆï¼Ÿçš„ç›´æ¥é“¾æ¥" title="Scheme æ˜¯ä»€ä¹ˆï¼Ÿçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>æˆ‘ä»¬ä¹‹å‰çœ‹åˆ°çš„ <code>Scheme</code> æ˜¯ä¸€ç§è¿½è¸ª Go Type çš„æ–¹æ³•ï¼Œå®ƒå¯¹åº”äºç»™å®šçš„GVK.</p><p>ä¾‹å¦‚ï¼Œå‡å¦‚æˆ‘ä»¬å°† <code>&quot;tutorial.kubebuilder.io/api/v1&quot;.Guestbook{}</code> ç±»å‹æ”¾ç½®åœ¨ <code>batch.tutorial.kubebuilder.io/v1</code> API ç»„ä¸­ï¼ˆä¹Ÿå°±æ˜¯è¯´å®ƒæœ‰ <code>Guestbook</code> Kind)ã€‚</p><p>ç„¶åï¼Œæˆ‘ä»¬ä¾¿å¯ä»¥åœ¨ API server ç»™å®šçš„ json æ•°æ®æ„é€ ä¸€ä¸ªæ–°çš„ <code>&amp;Guestbook{}</code>ã€‚</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#C6105F">&quot;kind&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;Guestbook&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#C6105F">&quot;apiVersion&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;batch.tutorial.kubebuilder.io/v1&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#D73A49">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æˆ–å½“æˆ‘ä»¬åœ¨ä¸€æ¬¡å˜æ›´ä¸­å»æ›´æ–°æˆ–æäº¤ <code>&amp;Guestbook{}</code> æ—¶ï¼ŒæŸ¥æ‰¾æ­£ç¡®çš„ç»„ç‰ˆæœ¬</p><h1>åˆ›å»ºä¸€ä¸ªAPI</h1><p>æ­å»ºä¸€ä¸ªæ–°çš„ kind ,å’Œç›¸åº”çš„æ§åˆ¶å™¨ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„API  ,æˆ‘ä»¬å¯ä»¥ä½¿ç”¨kubebuilder create api :</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"> kubebuilder create api --group webapp --version v1 --kind Guestbook</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å½“æˆ‘ä»¬ç¬¬ä¸€æ¬¡ä¸ºæ¯ä¸ªç»„-ç‰ˆæœ¬ä½¿ç”¨è¿™ä¸ªå‘½ä»¤çš„æ—¶å€™ï¼Œå®ƒä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªæ–°çš„ç»„-ç‰ˆæœ¬ç›®å½•ã€‚</p><p>æœ¬æ¡ˆä¾‹ä¸­åˆ›å»ºäº†ä¸€ä¸ªå¯¹åº” <code>dragon.com/v1</code>çš„ç›®å½• <code>api/v1</code></p><p>å®ƒä¹Ÿä¸ºæˆ‘ä»¬çš„ <code>Guestbook</code> Kind æ·»åŠ äº†ä¸€ä¸ªæ–‡ä»¶, <code>api/v1/guestbook_types.go</code>ã€‚æ¯æ¬¡æˆ‘ä»¬ç”¨ä¸åŒçš„ kind å»è°ƒç”¨è¿™ä¸ªå‘½ä»¤ï¼Œå®ƒå°†æ·»åŠ ä¸€ä¸ªç›¸åº”çš„æ–°æ–‡ä»¶ã€‚</p><p>æˆ‘ä»¬æ¥çœ‹ä¸‹æœ‰å“ªäº›ä¸œè¥¿ï¼š</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#8250DF">vi</span><span class="token plain"> guestbook_types.go</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å¯¼å…¥ meta/v1 API ç»„,é€šå¸¸æœ¬èº«å¹¶ä¸ä¼šæš´éœ²è¯¥ç»„ï¼Œè€Œæ˜¯åŒ…å«æ‰€æœ‰ k8s ç§ç±»å…±æœ‰çš„å…ƒæ•°æ®ã€‚</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#CF222E">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    metav1 </span><span class="token string" style="color:#C6105F">&quot;k8s.io/apimachinery/pkg/apis/meta/v1&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ä¸‹é¢ï¼Œæˆ‘ä»¬ä¸ºç§ç±»çš„ <code>Spec</code>  å’Œ <code>Status</code> å®šä¹‰ç±»å‹ã€‚ k8s åŠŸèƒ½é€šè¿‡ä½¿æœŸå¾…çš„çŠ¶æ€ (Spec) å’Œå®é™…é›†ç¾¤çŠ¶æ€(å…¶ä»–å¯¹è±¡çš„ <code>Status</code> )ä¿æŒä¸€è‡´å’Œå¤–éƒ¨çŠ¶æ€ï¼Œç„¶åè®°å½•è§‚å¯Ÿåˆ°çš„çŠ¶æ€(Status)ã€‚ å› æ­¤ï¼Œæ¯ä¸ª <code>functional</code> å¯¹è±¡åŒ…æ‹¬ <code>spec</code> å’Œ <code>status</code> ã€‚ å¾ˆå°‘çš„ç±»å‹ï¼Œåƒ <code>ConfiMap</code> ä¸éœ€è¦éµä»è¿™ä¸ªæ¨¡å¼ï¼Œå› æ­¤å®ƒä»¬ä¸ç¼–ç æœŸå¾…çš„çŠ¶æ€ï¼Œä½†æ˜¯å¤§éƒ¨åˆ†ç±»å‹éœ€è¦åšè¿™ä¸€æ­¥ã€‚</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#6B6B6B;font-style:italic">// ç¼–è¾‘è¿™ä¸ªæ–‡ä»¶ï¼è¿™ä¸ªæ˜¯ä½ æ‹¥æœ‰çš„è„šæ‰‹æ¶</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">// æ³¨æ„çš„æ˜¯ï¼šjson æ ‡ç­¾æ˜¯å¿…éœ€çš„.ä¸ºäº†èƒ½å¤Ÿåºåˆ—åŒ–å­—æ®µï¼Œä»»ä½•ä½ æ·»åŠ çš„æ–°å­—æ®µä¸€å®šè¦æœ‰ json æ ‡ç­¾ã€‚</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">// GuestbookSpec defines the desired state of Guestbook</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#CF222E">type</span><span class="token plain"> GuestbookSpec </span><span class="token keyword" style="color:#CF222E">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// INSERT ADDITIONAL SPEC FIELDS - desired state of cluster</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// Important: Run &quot;make&quot; to regenerate code after modifying this file</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// Foo is an example field of Guestbook. Edit guestbook_types.go to remove/update</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Foo </span><span class="token builtin">string</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">`json:&quot;foo,omitempty&quot;`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    metav1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">TypeMeta </span><span class="token string" style="color:#C6105F">`json:&quot;,inline&quot;`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    metav1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ObjectMeta </span><span class="token string" style="color:#C6105F">`json:&quot;metadata,omitempty&quot;`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Spec v1beta1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">CronJobSpec    </span><span class="token string" style="color:#C6105F">`json:&quot;spec,omitempty&quot;`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Status v1beta1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">CronJobStatus    </span><span class="token string" style="color:#C6105F">`json:&quot;status,omitempty&quot;`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">// GuestbookStatus defines the observed state of Guestbook</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#CF222E">type</span><span class="token plain"> GuestbookStatus </span><span class="token keyword" style="color:#CF222E">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// INSERT ADDITIONAL STATUS FIELD - define observed state of cluster</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// Important: Run &quot;make&quot; to regenerate code after modifying this file</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ä¸‹ä¸€æ­¥ï¼Œæˆ‘ä»¬å®šä¹‰ä¸å®é™…ç§ç±»ç›¸å¯¹åº”çš„ç±»å‹ï¼Œ<code>Guestbook</code> å’Œ <code>GuestbookList</code> ã€‚<code>Guestbook</code> æ˜¯ä¸€ä¸ªæ ¹ç±»å‹ï¼Œå®ƒæè¿°äº† <code>Guestbook</code>ç§ç±»ã€‚åƒæ‰€æœ‰ k8s å¯¹è±¡ï¼Œå®ƒåŒ…å« <code>TypeMeta</code> (æè¿°äº† API ç‰ˆæœ¬å’Œç§ç±»),ä¹ŸåŒ…å«å…¶ä¸­æ‹¥æœ‰åƒåç§°ï¼Œåç§°ç©ºé—´å’Œæ ‡ç­¾çš„ä¸œè¥¿çš„ <code>ObjectMeta</code>ã€‚
<code>GuestbookList</code> åªæ˜¯å¤šä¸ª <code>Guestbook</code> çš„å®¹å™¨ï¼Œå®ƒæ˜¯æ‰¹é‡æ“ä½œä¸­ä½¿ç”¨çš„ç§ç±»ï¼Œåƒ List ã€‚</p><p>é€šå¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä»ä¸ä¿®æ”¹ä»»ä½•ä¸€ä¸ª -- æ‰€æœ‰ä¿®æ”¹éƒ½è¦åˆ° <code>Spec</code> æˆ–è€… <code>Status</code>ã€‚</p><p>é‚£ä¸ªå°å°çš„ <code>+kubebuilder:object:root</code> æ³¨é‡Šè¢«ç§°ä¸ºæ ‡è®°ã€‚æˆ‘ä»¬å°†ä¼šçœ‹åˆ°æ›´å¤šçš„å®ƒä»¬ï¼Œä½†è¦çŸ¥é“å®ƒä»¬å……å½“é¢å¤–çš„å…ƒæ•°æ®ï¼Œå‘Šè¯‰ <code>controller-root</code> (æˆ‘ä»¬çš„ä»£ç å’ŒYAMLç”Ÿæˆå™¨)é¢å¤–çš„ä¿¡æ¯ã€‚è¿™ä¸ªç‰¹å®šçš„æ ‡ç­¾å‘Šè¯‰ <code>object</code> ç”Ÿæˆå™¨è¿™ä¸ªç±»å‹è¡¨ç¤ºä¸€ä¸ªç§ç±»ã€‚ç„¶åï¼Œ<code>object</code>ç”Ÿæˆå™¨ä¸ºæˆ‘ä»¬ç”Ÿæˆè¿™ä¸ªæ‰€æœ‰è¡¨ç¤ºç§ç±»çš„ç±»å‹ä¸€å®šè¦å®ç°çš„ <code>runtime.Object</code> æ¥å£çš„å®ç°ã€‚</p><h1>æµ‹è¯•</h1><p>å°† CRD å®‰è£…åˆ°é›†ç¾¤ä¸­</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#8250DF">make</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">install</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>è¿è¡Œæ§åˆ¶å™¨ï¼ˆè¿™å°†åœ¨å‰å°è¿è¡Œï¼Œå¦‚æœä½ æƒ³è®©å®ƒä¸€ç›´è¿è¡Œï¼Œè¯·åˆ‡æ¢åˆ°æ–°çš„ç»ˆç«¯ï¼‰ã€‚</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#8250DF">make</span><span class="token plain"> run</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="å®‰è£…-cr-å®ä¾‹">å®‰è£… CR å®ä¾‹<a href="#å®‰è£…-cr-å®ä¾‹" class="hash-link" aria-label="å®‰è£… CR å®ä¾‹çš„ç›´æ¥é“¾æ¥" title="å®‰è£… CR å®ä¾‹çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>å¦‚æœä½ æŒ‰äº† <code>y</code> åˆ›å»ºèµ„æº <!-- -->[y/n]<!-- -->ï¼Œé‚£ä¹ˆä½ å°±ä¸ºç¤ºä¾‹ä¸­çš„è‡ªå®šä¹‰èµ„æºå®šä¹‰ <code>CRD</code> åˆ›å»ºäº†ä¸€ä¸ªè‡ªå®šä¹‰èµ„æº <code>CR</code> ï¼ˆå¦‚æœä½ æ›´æ”¹äº† API å®šä¹‰ï¼Œè¯·åŠ¡å¿…å…ˆç¼–è¾‘å®ƒä»¬ï¼‰ã€‚</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl apply -f config/samples/</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="å¦‚ä½•åœ¨é›†ç¾¤ä¸­è¿è¡Œ">å¦‚ä½•åœ¨é›†ç¾¤ä¸­è¿è¡Œ<a href="#å¦‚ä½•åœ¨é›†ç¾¤ä¸­è¿è¡Œ" class="hash-link" aria-label="å¦‚ä½•åœ¨é›†ç¾¤ä¸­è¿è¡Œçš„ç›´æ¥é“¾æ¥" title="å¦‚ä½•åœ¨é›†ç¾¤ä¸­è¿è¡Œçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>æ„å»ºå¹¶æ¨é€ä½ çš„é•œåƒåˆ° ä½ æŒ‡å®šçš„é•œåƒä»“åº“</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#8250DF">make</span><span class="token plain"> docker-build docker-push </span><span class="token assign-left variable" style="color:#E36209">IMG</span><span class="token operator" style="color:#D73A49">=</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain">your-registry</span><span class="token operator" style="color:#D73A49">&gt;</span><span class="token plain">/</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain">project-name</span><span class="token operator" style="color:#D73A49">&gt;</span><span class="token plain">:tag</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æ ¹æ® IMG æŒ‡å®šçš„é•œåƒå°†æ§åˆ¶å™¨éƒ¨ç½²åˆ°é›†ç¾¤ä¸­</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#8250DF">make</span><span class="token plain"> deploy </span><span class="token assign-left variable" style="color:#E36209">IMG</span><span class="token operator" style="color:#D73A49">=</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain">your-registry</span><span class="token operator" style="color:#D73A49">&gt;</span><span class="token plain">/</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain">project-name</span><span class="token operator" style="color:#D73A49">&gt;</span><span class="token plain">:tag</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">æœ€å<!-- -->äº <b><time datetime="2023-02-09T03:21:02.000Z">2023å¹´2æœˆ9æ—¥</time></b> <!-- -->æ›´æ–°</span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="æ–‡æ¡£åˆ†é¡µå¯¼èˆª"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/kubernetes/kube-edge"><div class="pagination-nav__sublabel">ä¸Šä¸€é¡µ</div><div class="pagination-nav__label">edge cloud</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/kubernetes/kubebuilder/quick-start"><div class="pagination-nav__sublabel">ä¸‹ä¸€é¡µ</div><div class="pagination-nav__label">quick-start</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#ä¸€ä¸ªåŸºç¡€é¡¹ç›®é‡Œéƒ½æœ‰ä»€ä¹ˆ" class="table-of-contents__link toc-highlight">ä¸€ä¸ªåŸºç¡€é¡¹ç›®é‡Œéƒ½æœ‰ä»€ä¹ˆï¼Ÿ</a><ul><li><a href="#æ„å»ºåŸºç¡€ç»„ä»¶" class="table-of-contents__link toc-highlight">æ„å»ºåŸºç¡€ç»„ä»¶</a></li><li><a href="#å¯åŠ¨é…ç½®" class="table-of-contents__link toc-highlight">å¯åŠ¨é…ç½®</a></li><li><a href="#ç¨‹åºå…¥å£" class="table-of-contents__link toc-highlight">ç¨‹åºå…¥å£</a></li><li><a href="#ä»»ä½•ä¸€æ®µæ—…ç¨‹éƒ½éœ€è¦ä¸€ä¸ªèµ·ç‚¹æ¯ä¸€ä¸ªç¨‹åºéƒ½éœ€è¦ä¸€ä¸ªå…¥å£å‡½æ•°" class="table-of-contents__link toc-highlight">ä»»ä½•ä¸€æ®µæ—…ç¨‹éƒ½éœ€è¦ä¸€ä¸ªèµ·ç‚¹ï¼Œæ¯ä¸€ä¸ªç¨‹åºéƒ½éœ€è¦ä¸€ä¸ªå…¥å£å‡½æ•°</a></li></ul></li><li><a href="#ç»„å’Œç‰ˆæœ¬" class="table-of-contents__link toc-highlight">ç»„å’Œç‰ˆæœ¬</a></li><li><a href="#ç±»å‹å’Œèµ„æº" class="table-of-contents__link toc-highlight">ç±»å‹å’Œèµ„æº</a></li><li><a href="#scheme-æ˜¯ä»€ä¹ˆ" class="table-of-contents__link toc-highlight">Scheme æ˜¯ä»€ä¹ˆï¼Ÿ</a></li><li><a href="#å®‰è£…-cr-å®ä¾‹" class="table-of-contents__link toc-highlight">å®‰è£… CR å®ä¾‹</a></li><li><a href="#å¦‚ä½•åœ¨é›†ç¾¤ä¸­è¿è¡Œ" class="table-of-contents__link toc-highlight">å¦‚ä½•åœ¨é›†ç¾¤ä¸­è¿è¡Œ</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/category/docs">æ–‡æ¡£</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 - 2024 loong's wiki, Inc. Built with <a href="https://docusaurus.io/zh-CN/">Docusaurus</a> .</div></div></div></footer></div>
<script src="/assets/js/runtime~main.68f25493.js"></script>
<script src="/assets/js/main.88d057a0.js"></script>
</body>
</html>